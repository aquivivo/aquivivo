<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="utf-8" />
    <title>Panel del estudiante | AquiVivo</title>
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />
    <link
      href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&amp;family=Playfair+Display:wght@700;900&amp;display=swap"
      rel="stylesheet"
    />
    <!-- ‚úÖ consistente con login/admin -->
    <link href="assets/css/styles.css" rel="stylesheet" />
    <style>
            .panel-grid {
              display: grid;
              grid-template-columns: 1.2fr 0.8fr;
              gap: 16px;
              margin-bottom: 16px;
            }
            @media (max-width: 860px) {
              .panel-grid {
                grid-template-columns: 1fr;
              }
            }

            .courses-grid {
              display: grid;
              grid-template-columns: repeat(2, 1fr);
              gap: 24px;
              margin-top: 12px;
            }
            @media (max-width: 860px) {
              .courses-grid {
                grid-template-columns: 1fr;
              }
            }

            .course-card {
              display: flex;
              flex-direction: column;
              gap: 10px;
              min-height: 140px;
            }
            .course-actions {
              margin-top: auto;
              display: flex;
              gap: 10px;
              flex-wrap: wrap;
            }

            .pill {
              display: inline-flex;
              align-items: center;
              gap: 8px;
              padding: 8px 12px;
              border-radius: 999px;
              font-weight: 900;
              font-size: 12px;
              letter-spacing: 0.2px;
            }
            .pill-ok {
              background: rgba(252, 209, 22, 0.22);
              border: 1px solid rgba(252, 209, 22, 0.45);
              color: #111827;
            }

            .pill-warn {
              background: rgba(206, 17, 38, 0.18);
              border: 1px solid rgba(206, 17, 38, 0.35);
              color: #fff;
            }
            .pill-neutral {
              background: rgba(255, 255, 255, 0.1);
              border: 1px solid rgba(255, 255, 255, 0.18);
              color: #fff;
            }


            .pill-expired {
              background: rgba(255, 80, 80, 0.25);
              color: #ff8080;
              border: 1px solid rgba(255, 80, 80, 0.4);
            }

            .pill-lock {
              background: rgba(255, 255, 255, 0.1);
              border: 1px solid rgba(255, 255, 255, 0.18);
              color: white;
              backdrop-filter: blur(10px);
            }

            .small-muted {
              margin: 0;
              font-size: 13px;
              color: #6b7280;
              line-height: 1.35;
            }

            .glass-card {
              background: rgba(255, 255, 255, 0.1);
              color: white;
              border: 1px solid rgba(255, 255, 255, 0.18);
              backdrop-filter: blur(12px);
            }

            .adminLinkWrap {
              margin-top: 10px;
              display: none;
            }
            .adminLinkWrap.show {
              display: block;
            }

      .progress-wrap{
              margin-top: 6px;
              display:flex;
              flex-direction:column;
              gap:6px;
            }
            .progress-bar{
              width:100%;
              height:10px;
              border-radius:999px;
              background: rgba(255,255,255,0.16);
              border: 1px solid rgba(255,255,255,0.18);
              overflow:hidden;
            }
            .progress-fill{
              height:100%;
              width:0%;
              border-radius:999px;
              background: rgba(252, 209, 22, 0.85);
            }
            .progress-meta{
              display:flex;
              justify-content:space-between;
              align-items:center;
              font-size:12px;
              font-weight:800;
              opacity:.95;
            }
            .last-activity{
              margin-top: 12px;
              display:none;
            }


            /* Course tiles (match homepage pricing style) */
            .course-tile{
              position: relative;
              border-radius: 28px;
              overflow: hidden;
              padding: 16px 16px 14px;
              box-shadow: 0 18px 40px rgba(0,0,0,0.25);
              border: 2px solid rgba(255,255,255,0.14);
              min-height: 300px;
            }
            .tile-blue{ background: #173B8C; color: #ffffff; }
            .tile-yellow{ background: #FCD116; color: #0b1a3a; }
            .tile-white{ background: #ffffff; color: #0b1a3a; }
            .tile-red{ background: #CE1126; color: #ffffff; }

            .tile-top-pill{
              position:absolute;
              top: -14px;
              left: 22px;
              padding: 10px 16px;
              border-radius: 999px;
              font-weight: 900;
              font-size: 14px;
              box-shadow: 0 10px 24px rgba(0,0,0,0.18);
              border: 2px solid rgba(255,255,255,0.35);
              background: rgba(255,255,255,0.92);
              color: #0b1a3a;
            }
            .tile-top-pill.red{
              background: #CE1126;
              color: #fff;
              border-color: rgba(255,255,255,0.35);
            }

            .tile-badge{
              display:inline-flex;
              align-items:center;
              gap:10px;
              padding: 10px 14px;
              border-radius: 999px;
              font-weight: 900;
              font-size: 15px;
              background: rgba(255,255,255,0.25);
              border: 1px solid rgba(255,255,255,0.35);
              backdrop-filter: blur(10px);
            }
            .tile-yellow .tile-badge{ background: rgba(11,26,58,0.08); border-color: rgba(11,26,58,0.18); }
            .tile-white .tile-badge{ background: rgba(11,26,58,0.06); border-color: rgba(11,26,58,0.16); }
            .tile-red .tile-badge{ background: rgba(255,255,255,0.16); border-color: rgba(255,255,255,0.25); }
            .tile-blue .tile-badge{ background: rgba(255,255,255,0.16); border-color: rgba(255,255,255,0.26); }

            .tile-title{
              margin-top: 18px;
              font-family: 'Playfair Display', serif;
              font-weight: 900;
              font-size: 28px;
              line-height: 1.08;
            }
            .tile-subtitle{
              margin-top: 10px;
              font-style: italic;
              font-weight: 700;
              opacity: .92;
            }

            .tile-meta{
              margin-top: 18px;
              font-size: 14px;
              line-height: 1.35;
              opacity: .92;
            }

            .tile-actions{
              margin-top: auto;
              display:flex;
              flex-direction:column;
              gap: 12px;
            }
            .tile-actions .btn-yellow{ width:100%; justify-content:center; }
            .tile-actions .btn-white-outline{ width:100%; justify-content:center; }
            .tile-red .btn-white-outline{ border-color: rgba(255,255,255,0.7); color:#fff; }
            .tile-blue .btn-white-outline{ border-color: rgba(255,255,255,0.7); color:#fff; }
            .tile-yellow .btn-white-outline{ border-color: rgba(11,26,58,0.35); color:#0b1a3a; }
            .tile-white .btn-white-outline{ border-color: rgba(11,26,58,0.35); color:#0b1a3a; }

            .tile-red .progress-bar{ background: rgba(255,255,255,0.18); border-color: rgba(255,255,255,0.22); }
            .tile-red .progress-fill{ background: rgba(252, 209, 22, 0.95); }
            .tile-blue .progress-bar{ background: rgba(255,255,255,0.18); border-color: rgba(255,255,255,0.22); }
            .tile-blue .progress-fill{ background: rgba(252, 209, 22, 0.95); }
            .tile-yellow .progress-bar{ background: rgba(11,26,58,0.10); border-color: rgba(11,26,58,0.18); }
            .tile-yellow .progress-fill{ background: rgba(206, 17, 38, 0.85); }
            .tile-white .progress-bar{ background: rgba(11,26,58,0.08); border-color: rgba(11,26,58,0.16); }
            .tile-white .progress-fill{ background: rgba(252, 209, 22, 0.9); }

            /* Coffee cup forced white */




            /* Coffee cup forced white */





            /* Coffee cup correct + white */


            /* Floating coffee on background */
            #coffeeFloat {
              animation: coffeeFloat 6s ease-in-out infinite;
              transform-origin: 50% 60%;
            }
            #coffeeFloat svg {
              width: 100%;
              height: 100%;
            }

              50%  { transform: translateY(-14px) translateX(-6px) rotate(1deg) scale(1.02); }
              100% { transform: translateY(0px) translateX(0px) rotate(-1deg) scale(1); }
            
            @media (max-width: 980px) {
              #coffeeFloat { display:none; }
            }


            /* Floating coffee (gentle, background) */
            #coffeeFloat {
              position:absolute;
              right:-40px;
              top:360px;
              width:420px;
              height:420px;
              pointer-events:none;
              opacity:0.9;
              filter: drop-shadow(0 20px 40px rgba(0,0,0,0.35));
              animation: coffeeFloat 7s ease-in-out infinite;
              transform-origin: 50% 60%;
            }
            #coffeeFloat svg {
              width:100%;
              height:100%;
            }
            @keyframes coffeeFloat {
              0%   { transform: translateY(0px) translateX(0px) rotate(-1deg) scale(1); }
              50%  { transform: translateY(-18px) translateX(-6px) rotate(1deg) scale(1.02); }
              100% { transform: translateY(0px) translateX(0px) rotate(-1deg) scale(1); }
            }

                .admin-only{ display:none; }

            /* Admin modal */
            .modal-backdrop{
              position: fixed;
              inset: 0;
              background: rgba(0,0,0,.45);
              display:flex;
              align-items:center;
              justify-content:center;
              padding: 18px;
              z-index: 9999;
            }
            .modal-card{
              width: min(560px, 100%);
              background: rgba(12, 24, 48, 0.96);
              border: 1px solid rgba(255,255,255,0.14);
              border-radius: 18px;
              padding: 18px;
              box-shadow: 0 18px 50px rgba(0,0,0,0.35);
              color: #fff;
            }
            .input{
              width: 100%;
              margin-top: 8px;
              padding: 12px 12px;
              border-radius: 12px;
              border: 1px solid rgba(255,255,255,0.18);
              background: rgba(255,255,255,0.07);
              color: #fff;
              font-family: inherit;
              outline: none;
            }
            .input:focus{ border-color: rgba(252,209,22,0.8); }
            .btn-icon{
              display:inline-flex;
              align-items:center;
              justify-content:center;
              width: 44px;
              height: 44px;
              border-radius: 14px;
              border: 1px solid rgba(255,255,255,0.18);
              background: rgba(255,255,255,0.08);
              color:#fff;
              cursor:pointer;
            }
            .btn-icon:hover{ transform: translateY(-1px); }


            /* ===== Settings modal (Planes/Precios + Promos) ===== */
            #settingsModal { display:none; position:fixed; inset:0; z-index:9999; align-items:center; justify-content:center; padding:18px; background:rgba(0,0,0,.55); }
            #settingsModal .modalBox { width:min(980px, 100%); max-height:90vh; overflow:auto; background:rgba(10,20,45,.98); border:1px solid rgba(255,255,255,.12); border-radius:22px; box-shadow: 0 18px 60px rgba(0,0,0,.45); }
            #settingsModal .modalHead { display:flex; align-items:center; justify-content:space-between; gap:12px; padding:16px 18px; border-bottom:1px solid rgba(255,255,255,.10); }
            #settingsModal .modalHead h3 { margin:0; font-size:18px; letter-spacing:.3px; }
            #settingsModal .tabs { display:flex; gap:10px; padding:12px 18px; flex-wrap:wrap; border-bottom:1px solid rgba(255,255,255,.10); }
            #settingsModal .tabBtn { border:1px solid rgba(255,255,255,.18); background:transparent; color:#fff; padding:10px 14px; border-radius:999px; font-weight:900; cursor:pointer; }
            #settingsModal .tabBtn.active { background: rgba(252,209,22,.18); border-color: rgba(252,209,22,.55); }
            #settingsModal .modalBody { padding:16px 18px 20px; }
            #settingsModal .grid2 { display:grid; grid-template-columns: repeat(2, minmax(0,1fr)); gap:14px; }
            #settingsModal .grid3 { display:grid; grid-template-columns: repeat(3, minmax(0,1fr)); gap:14px; }
            #settingsModal label { display:block; font-size:12px; opacity:.95; margin-bottom:6px; color:#fff; }
            #settingsModal input, #settingsModal select { width:100%; padding:12px 12px; border-radius:14px; border:1px solid rgba(255,255,255,.16); background:rgba(255,255,255,.06); color:#fff; outline:none; }
            #settingsModal .row { margin-top:12px; }
            #settingsModal .hr { height:1px; background:rgba(255,255,255,.10); margin:16px 0; }
            #settingsModal .actions { display:flex; gap:10px; justify-content:flex-end; flex-wrap:wrap; margin-top:14px; }
            #settingsModal .mini { font-size:12px; opacity:.92; color:#fff; }
            #promoList { display:flex; flex-direction:column; gap:10px; margin-top:12px; }
            .promoItem { border:1px solid rgba(255,255,255,.14); background:rgba(255,255,255,.04); border-radius:16px; padding:12px; display:flex; gap:12px; justify-content:space-between; align-items:flex-start; }
            .promoItem strong { font-size:14px; }
            .promoItem .meta { font-size:12px; opacity:.85; margin-top:4px; }
            .promoItem .btns { display:flex; gap:8px; flex-wrap:wrap; }
            @media (max-width: 760px){ #settingsModal .grid2, #settingsModal .grid3 { grid-template-columns: 1fr; } }
            #settingsModal, #settingsModal * { color:#fff; }
    </style>
    <script src="assets/js/layout.js" type="module"></script>
</head>
  <body data-page="panel">
    <div id="appHeader"></div>
    <main class="page">
      <div class="container">
        <section class="panel-grid">
          <div class="hero-card">
            <h1 class="hero-title glow-text">Panel del estudiante üéì</h1>
            <div
              style="
                margin-top: 12px;
                display: inline-flex;
                gap: 10px;
                align-items: center;
                padding: 10px 14px;
                border-radius: 16px;
                background: rgba(255, 255, 255, 0.1);
                border: 1px solid rgba(255, 255, 255, 0.18);
                backdrop-filter: blur(10px);
              "
            >
              <div style="font-weight: 900">üë§</div>
              <div style="font-weight: 800">
                Iniciada sesi√≥n como:
                <span id="userEmail" style="font-weight: 700; opacity: 0.95"
                  >...</span
                ><span
                  id="adminBadge"
                  style="margin-left: 10px; font-weight: 900; opacity: 0.95"
                  >(admin: ‚Äî)</span
                >
              </div>
            </div>
            <div
              class="card glass-card last-activity"
              id="lastActivityCard"
              style="padding: 12px 14px; border-radius: 16px"
            >
              <div
                style="
                  display: flex;
                  align-items: center;
                  justify-content: space-between;
                  gap: 10px;
                "
              >
                <div style="font-weight: 900">üïí √öltima actividad</div>
                <div
                  id="lastActivityWhen"
                  style="font-weight: 900; opacity: 0.9"
                ></div>
              </div>
              <div
                id="lastActivityTitle"
                style="margin-top: 6px; font-weight: 900; font-size: 16px"
              >
                ‚Äî
              </div>
              <div style="margin-top: 10px">
                <a class="btn-yellow" href="#" id="lastActivityLink"
                  >Continuar ‚Üí</a
                >
              </div>
            </div>
            <div class="adminLinkWrap" id="adminLinkWrap">
              <div
                style="
                  margin-top: 12px;
                  display: flex;
                  gap: 12px;
                  flex-wrap: wrap;
                "
              >
                <a class="btn-white-outline" href="esadmin.html">‚öôÔ∏è Admin</a>
                <button
                  class="btn-white-outline"
                  id="openSettingsBtn"
                  type="button"
                >
                  ‚öôÔ∏è Ajustes
                </button>
                <button
                  class="btn-yellow"
                  id="addCourseBtn"
                  type="button"
                  style="
                    padding: 12px 16px;
                    border-radius: 999px;
                    font-weight: 900;
                  "
                >
                  ‚ûï Nuevo curso
                </button>
              </div>
              <p
                class="small-muted"
                style="margin-top: 8px; color: rgba(255, 255, 255, 0.8)"
              >
                Solo visible para administradores.
              </p>
            </div>
          </div>
        </section>
        <!-- Big section header (style like landing title) -->
        <div style="margin-top: 10px"></div>
        <div style="display: grid; grid-template-columns: 2fr 1fr; gap: 28px">
          <!-- LEFT: courses -->
          <div class="courses-grid" id="coursesCards"></div>
          <div
            aria-hidden="true"
            id="coffeeFloat"
            style="
              position: absolute;
              right: -40px;
              top: 120px;
              width: 420px;
              height: 420px;
              pointer-events: none;
              opacity: 0.9;
              filter: drop-shadow(0 20px 40px rgba(0, 0, 0, 0.35));
            "
          >
            <svg
              class="w-72 h-72 mx-auto drop-shadow-2xl"
              viewbox="0 0 200 200"
              xmlns="http://www.w3.org/2000/svg"
            >
              <defs>
                <lineargradient
                  id="cupGradient"
                  x1="0%"
                  x2="0%"
                  y1="0%"
                  y2="100%"
                >
                  <stop
                    offset="0%"
                    style="stop-color: #8b4513; stop-opacity: 1"
                  ></stop>
                  <stop
                    offset="100%"
                    style="stop-color: #654321; stop-opacity: 1"
                  ></stop>
                </lineargradient>
                <lineargradient
                  id="coffeeGradient"
                  x1="0%"
                  x2="0%"
                  y1="0%"
                  y2="100%"
                >
                  <stop
                    offset="0%"
                    style="stop-color: #6f4e37; stop-opacity: 1"
                  ></stop>
                  <stop
                    offset="100%"
                    style="stop-color: #3e2723; stop-opacity: 1"
                  ></stop>
                </lineargradient>
              </defs>
              <ellipse
                cx="100"
                cy="55"
                fill="#FCD116"
                opacity="0.3"
                rx="70"
                ry="15"
              ></ellipse>
              <ellipse
                cx="100"
                cy="55"
                fill="#003893"
                opacity="0.3"
                rx="60"
                ry="12"
              ></ellipse>
              <ellipse
                cx="100"
                cy="55"
                fill="#FCD116"
                opacity="0.3"
                rx="50"
                ry="10"
              ></ellipse>
              <rect
                fill="#FCD116"
                height="25"
                opacity="0.3"
                rx="5"
                width="30"
                x="85"
                y="55"
              ></rect>
              <path
                d="M 60 120 L 65 160 Q 65 170 75 170 L 125 170 Q 135 170 135 160 L 140 120 Z"
                fill="url(#cupGradient)"
                stroke="#654321"
                stroke-width="2"
              ></path>
              <ellipse
                cx="100"
                cy="120"
                fill="url(#coffeeGradient)"
                rx="35"
                ry="8"
              ></ellipse>
              <path
                d="M 140 130 Q 155 130 155 145 Q 155 160 140 160"
                fill="none"
                stroke="url(#cupGradient)"
                stroke-linecap="round"
                stroke-width="8"
              ></path>
              <rect
                fill="#FCD116"
                height="8"
                opacity="0.6"
                rx="2"
                width="60"
                x="70"
                y="135"
              ></rect>
              <rect
                fill="#003893"
                height="5"
                opacity="0.6"
                rx="1"
                width="60"
                x="70"
                y="145"
              ></rect>
              <rect
                fill="#CE1126"
                height="5"
                opacity="0.6"
                rx="1"
                width="60"
                x="70"
                y="152"
              ></rect>
              <path
                d="M 85 110 Q 80 95 85 85"
                fill="none"
                opacity="0.7"
                stroke="#FCD116"
                stroke-linecap="round"
                stroke-width="3"
              >
                <animate
                  attributename="opacity"
                  dur="2s"
                  repeatcount="indefinite"
                  values="0.7;0.3;0.7"
                ></animate>
                <animate
                  attributename="d"
                  dur="2s"
                  repeatcount="indefinite"
                  values="M 85 110 Q 80 95 85 85;M 85 110 Q 90 95 85 85;M 85 110 Q 80 95 85 85"
                ></animate>
              </path>
              <path
                d="M 100 108 Q 100 90 105 80"
                fill="none"
                opacity="0.8"
                stroke="#FCD116"
                stroke-linecap="round"
                stroke-width="4"
              >
                <animate
                  attributename="opacity"
                  dur="2.5s"
                  repeatcount="indefinite"
                  values="0.8;0.4;0.8"
                ></animate>
                <animate
                  attributename="d"
                  dur="2.5s"
                  repeatcount="indefinite"
                  values="M 100 108 Q 100 90 105 80;M 100 108 Q 105 90 100 80;M 100 108 Q 100 90 105 80"
                ></animate>
              </path>
              <path
                d="M 115 110 Q 120 95 115 85"
                fill="none"
                opacity="0.7"
                stroke="#FCD116"
                stroke-linecap="round"
                stroke-width="3"
              >
                <animate
                  attributename="opacity"
                  dur="2.2s"
                  repeatcount="indefinite"
                  values="0.7;0.3;0.7"
                ></animate>
                <animate
                  attributename="d"
                  dur="2.2s"
                  repeatcount="indefinite"
                  values="M 115 110 Q 120 95 115 85;M 115 110 Q 110 95 115 85;M 115 110 Q 120 95 115 85"
                ></animate>
              </path>
              <ellipse
                cx="50"
                cy="140"
                fill="#3E2723"
                rx="8"
                ry="10"
                transform="rotate(-20 50 140)"
              >
                <animate
                  attributename="opacity"
                  dur="3s"
                  repeatcount="indefinite"
                  values="1;0.7;1"
                ></animate>
              </ellipse>
              <path
                d="M 50 135 Q 50 140 50 145"
                stroke="#654321"
                stroke-width="1.5"
              ></path>
              <ellipse
                cx="150"
                cy="135"
                fill="#3E2723"
                rx="8"
                ry="10"
                transform="rotate(20 150 135)"
              >
                <animate
                  attributename="opacity"
                  dur="3s"
                  repeatcount="indefinite"
                  values="0.7;1;0.7"
                ></animate>
              </ellipse>
              <path
                d="M 150 130 Q 150 135 150 140"
                stroke="#654321"
                stroke-width="1.5"
              ></path>
              <rect
                fill="#FCD116"
                height="8"
                opacity="0.9"
                rx="1"
                width="60"
                x="70"
                y="175"
              ></rect>
              <rect
                fill="#FFFFFF"
                height="8"
                opacity="0.8"
                rx="1"
                width="50"
                x="75"
                y="178"
              ></rect>
              <rect
                fill="#FCD116"
                height="8"
                opacity="0.7"
                rx="1"
                width="40"
                x="80"
                y="181"
              ></rect>
              <path
                d="M 100 100 L 95 95 Q 90 90 90 95 Q 90 100 95 105 L 100 110 L 105 105 Q 110 100 110 95 Q 110 90 105 95 Z"
                fill="#CE1126"
                opacity="0.8"
              >
                <animate
                  attributename="transform"
                  dur="1.5s"
                  repeatcount="indefinite"
                  values="translate(0,0) scale(1);translate(0,-3) scale(1.1);translate(0,0) scale(1)"
                ></animate>
              </path>
            </svg>
          </div>
          <section id="pricingSection" style="margin-top: 60px">
          <!-- ADMIN MODAL -->
          <div
            id="adminModal"
            style="
              display: none;
              position: fixed;
              inset: 0;
              background: rgba(0, 0, 0, 0.55);
              z-index: 9999;
              padding: 22px;
              overflow: auto;
            "
          >
            <div
              style="
                max-width: 860px;
                margin: 0 auto;
                background: #0b1a3a;
                border: 1px solid rgba(255, 255, 255, 0.18);
                border-radius: 22px;
                padding: 18px 18px 14px;
                box-shadow: 0 20px 60px rgba(0, 0, 0, 0.45);
              "
            >
              <div
                style="
                  display: flex;
                  align-items: center;
                  justify-content: space-between;
                  gap: 12px;
                "
              >
                <div
                  style="
                    font-family: 'Playfair Display', serif;
                    font-size: 34px;
                    font-weight: 900;
                    color: #fcd116;
                  "
                >
                  Panel Admin
                </div>
                <div style="display: flex; gap: 10px; align-items: center">
                  <button class="btn-white-outline" onclick="closeAdminPanel()">
                    Cerrar
                  </button>
                </div>
              </div>
              <div
                style="
                  margin-top: 14px;
                  display: grid;
                  grid-template-columns: 1fr 1fr;
                  gap: 16px;
                "
              >
                <div
                  style="
                    background: rgba(255, 255, 255, 0.06);
                    border: 1px solid rgba(255, 255, 255, 0.12);
                    border-radius: 16px;
                    padding: 14px;
                  "
                >
                  <div style="font-weight: 900; margin-bottom: 10px">
                    üí≥ Precios
                  </div>
                  <label style="display: block; font-weight: 800; opacity: 0.9"
                    >A1‚ÄìA2</label
                  >
                  <input
                    id="adm_price_A1A2"
                    style="
                      width: 100%;
                      padding: 10px 12px;
                      border-radius: 12px;
                      border: 1px solid rgba(255, 255, 255, 0.18);
                      background: rgba(255, 255, 255, 0.08);
                      color: white;
                    "
                  />
                  <div style="height: 10px"></div>
                  <label style="display: block; font-weight: 800; opacity: 0.9"
                    >B1</label
                  >
                  <input
                    id="adm_price_B1"
                    style="
                      width: 100%;
                      padding: 10px 12px;
                      border-radius: 12px;
                      border: 1px solid rgba(255, 255, 255, 0.18);
                      background: rgba(255, 255, 255, 0.08);
                      color: white;
                    "
                  />
                  <div style="height: 10px"></div>
                  <label style="display: block; font-weight: 800; opacity: 0.9"
                    >B2</label
                  >
                  <input
                    id="adm_price_B2"
                    style="
                      width: 100%;
                      padding: 10px 12px;
                      border-radius: 12px;
                      border: 1px solid rgba(255, 255, 255, 0.18);
                      background: rgba(255, 255, 255, 0.08);
                      color: white;
                    "
                  />
                </div>
                <div
                  style="
                    background: rgba(255, 255, 255, 0.06);
                    border: 1px solid rgba(255, 255, 255, 0.12);
                    border-radius: 16px;
                    padding: 14px;
                  "
                >
                  <div style="font-weight: 900; margin-bottom: 10px">
                    üéõÔ∏è Trial / acceso gratis
                  </div>
                  <label style="display: block; font-weight: 800; opacity: 0.9"
                    >D√≠as de trial (por nivel)</label
                  >
                  <div
                    style="
                      display: grid;
                      grid-template-columns: repeat(4, 1fr);
                      gap: 10px;
                    "
                  >
                    <input
                      id="adm_trial_A1"
                      placeholder="A1"
                      style="
                        padding: 10px 12px;
                        border-radius: 12px;
                        border: 1px solid rgba(255, 255, 255, 0.18);
                        background: rgba(255, 255, 255, 0.08);
                        color: white;
                      "
                    />
                    <input
                      id="adm_trial_A2"
                      placeholder="A2"
                      style="
                        padding: 10px 12px;
                        border-radius: 12px;
                        border: 1px solid rgba(255, 255, 255, 0.18);
                        background: rgba(255, 255, 255, 0.08);
                        color: white;
                      "
                    />
                    <input
                      id="adm_trial_B1"
                      placeholder="B1"
                      style="
                        padding: 10px 12px;
                        border-radius: 12px;
                        border: 1px solid rgba(255, 255, 255, 0.18);
                        background: rgba(255, 255, 255, 0.08);
                        color: white;
                      "
                    />
                    <input
                      id="adm_trial_B2"
                      placeholder="B2"
                      style="
                        padding: 10px 12px;
                        border-radius: 12px;
                        border: 1px solid rgba(255, 255, 255, 0.18);
                        background: rgba(255, 255, 255, 0.08);
                        color: white;
                      "
                    />
                  </div>
                  <div style="height: 12px"></div>
                  <div style="font-weight: 900; margin-bottom: 8px">
                    üè∑Ô∏è C√≥digo de descuento
                  </div>
                  <div
                    style="
                      display: grid;
                      grid-template-columns: 1.2fr 0.8fr 1fr;
                      gap: 10px;
                    "
                  >
                    <input
                      id="adm_promo_code"
                      placeholder="CODIGO (ej. BIENVENIDA10)"
                      style="
                        padding: 10px 12px;
                        border-radius: 12px;
                        border: 1px solid rgba(255, 255, 255, 0.18);
                        background: rgba(255, 255, 255, 0.08);
                        color: white;
                      "
                    />
                    <input
                      id="adm_promo_pct"
                      placeholder="% (ej. 10)"
                      style="
                        padding: 10px 12px;
                        border-radius: 12px;
                        border: 1px solid rgba(255, 255, 255, 0.18);
                        background: rgba(255, 255, 255, 0.08);
                        color: white;
                      "
                    />
                    <input
                      id="adm_promo_days"
                      placeholder="d√≠as gratis (opcional)"
                      style="
                        padding: 10px 12px;
                        border-radius: 12px;
                        border: 1px solid rgba(255, 255, 255, 0.18);
                        background: rgba(255, 255, 255, 0.08);
                        color: white;
                      "
                    />
                  </div>
                  <div
                    style="
                      margin-top: 10px;
                      display: flex;
                      gap: 10px;
                      flex-wrap: wrap;
                    "
                  >
                    <button class="btn-yellow" onclick="addPromo()">
                      A√±adir c√≥digo
                    </button>
                    <button class="btn-white-outline" onclick="clearPromos()">
                      Borrar lista
                    </button>
                  </div>
                  <div
                    id="promoList"
                    style="margin-top: 12px; font-size: 13px; opacity: 0.95"
                  ></div>
                </div>
              </div>
              <div
                style="
                  margin-top: 16px;
                  background: rgba(255, 255, 255, 0.06);
                  border: 1px solid rgba(255, 255, 255, 0.12);
                  border-radius: 16px;
                  padding: 14px;
                "
              >
                <div style="font-weight: 900; margin-bottom: 10px">
                  ‚ûï Botones extra (secci√≥n precios)
                </div>
                <div
                  style="
                    display: grid;
                    grid-template-columns: 1fr 1fr 0.6fr;
                    gap: 10px;
                  "
                >
                  <input
                    id="adm_btn_text"
                    placeholder="Texto del bot√≥n"
                    style="
                      padding: 10px 12px;
                      border-radius: 12px;
                      border: 1px solid rgba(255, 255, 255, 0.18);
                      background: rgba(255, 255, 255, 0.08);
                      color: white;
                    "
                  />
                  <input
                    id="adm_btn_href"
                    placeholder="Link (ej. Contacto.html)"
                    style="
                      padding: 10px 12px;
                      border-radius: 12px;
                      border: 1px solid rgba(255, 255, 255, 0.18);
                      background: rgba(255, 255, 255, 0.08);
                      color: white;
                    "
                  />
                  <select
                    id="adm_btn_style"
                    style="
                      padding: 10px 12px;
                      border-radius: 12px;
                      border: 1px solid rgba(255, 255, 255, 0.18);
                      background: rgba(255, 255, 255, 0.08);
                      color: white;
                    "
                  >
                    <option value="yellow">Amarillo</option>
                    <option value="outline">Outline</option>
                  </select>
                </div>
                <div
                  style="
                    margin-top: 10px;
                    display: flex;
                    gap: 10px;
                    flex-wrap: wrap;
                  "
                >
                  <button class="btn-yellow" onclick="addExtraButton()">
                    A√±adir bot√≥n
                  </button>
                  <button
                    class="btn-white-outline"
                    onclick="clearExtraButtons()"
                  >
                    Borrar botones
                  </button>
                </div>
                <div id="extraButtonsPreview" style="margin-top: 12px"></div>
              </div>
              <div
                style="
                  margin-top: 14px;
                  display: flex;
                  justify-content: flex-end;
                  gap: 10px;
                  flex-wrap: wrap;
                "
              >
                <button class="btn-white-outline" onclick="reloadSettings()">
                  Revertir
                </button>
                <button class="btn-yellow" onclick="saveSettingsLegacy()">
                  Guardar en Firestore
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </main>
    <!-- ===== Admin: Edit course tiles (only title/subtitle) ===== -->
    <div id="metaModal" class="modal-backdrop" style="display: none">
      <div
        class="modal-card"
        role="dialog"
        aria-modal="true"
        aria-labelledby="metaModalTitle"
      >
        <div
          style="
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 12px;
          "
        >
          <h3
            id="metaModalTitle"
            style="margin: 0; font-size: 20px; font-weight: 900"
          >
            ‚úèÔ∏è Editar tarjeta
          </h3>
          <button
            id="metaClose"
            class="btn-white-outline"
            style="padding: 10px 14px"
          >
            ‚úï
          </button>
        </div>

        <div style="margin-top: 14px; opacity: 0.85">
          Nivel: <strong id="metaLevel">‚Äî</strong>
        </div>

        <label style="display: block; margin-top: 14px; font-weight: 800"
          >T√≠tulo</label
        >
        <input id="metaTitle" class="input" placeholder="T√≠tulo del curso" />

        <label style="display: block; margin-top: 12px; font-weight: 800"
          >Subt√≠tulo</label
        >
        <textarea
          id="metaSubtitle"
          class="input"
          rows="3"
          placeholder="Subt√≠tulo / descripci√≥n corta"
        ></textarea>

        <div
          style="
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
            margin-top: 14px;
          "
        >
          <div>
            <label style="display: block; font-weight: 800"
              >Color fondo (kafelek)</label
            >
            <input id="metaTileBg" class="input" placeholder="#ffffff" />
          </div>
          <div>
            <label style="display: block; font-weight: 800"
              >Color texto (kafelek)</label
            >
            <input id="metaTileText" class="input" placeholder="#111111" />
          </div>
          <div>
            <label style="display: block; font-weight: 800"
              >Texto bot√≥n principal</label
            >
            <input
              id="metaPrimaryLabel"
              class="input"
              placeholder="Entrar / Comprar / ..."
            />
          </div>
          <div>
            <label style="display: block; font-weight: 800"
              >Link bot√≥n principal (opcional)</label
            >
            <input
              id="metaPrimaryHref"
              class="input"
              placeholder="course.html?level=A1 o https://..."
            />
          </div>
          <div>
            <label style="display: block; font-weight: 800"
              >Color bot√≥n (fondo)</label
            >
            <input id="metaBtnBg" class="input" placeholder="#FCD34D" />
          </div>
          <div>
            <label style="display: block; font-weight: 800"
              >Color bot√≥n (texto)</label
            >
            <input id="metaBtnText" class="input" placeholder="#111111" />
          </div>
        </div>

        <div
          style="
            margin-top: 10px;
            font-size: 12px;
            opacity: 0.75;
            line-height: 1.35;
          "
        >
          Tips: wpisuj kolory w formacie <strong>#RRGGBB</strong>. Je≈õli
          zostawisz puste ‚Äî zostanƒÖ domy≈õlne style.
        </div>

        <div
          id="metaDeleteWrap"
          style="
            margin-top: 12px;
            display: none;
            padding: 12px 12px;
            border-radius: 14px;
            border: 1px solid rgba(206, 17, 38, 0.4);
            background: rgba(206, 17, 38, 0.14);
          "
        >
          <div style="font-weight: 900">üóëÔ∏è Eliminar curso</div>
          <label
            style="
              display: flex;
              gap: 10px;
              align-items: flex-start;
              margin-top: 10px;
              font-weight: 700;
            "
          >
            <input
              type="checkbox"
              id="metaDeleteWithData"
              style="margin-top: 3px"
            />
            <span
              >Eliminar tambi√©n <b>temas (courses)</b> y
              <b>ejercicios (exercises)</b> de este nivel.</span
            >
          </label>
          <div
            style="
              margin-top: 8px;
              font-size: 12px;
              opacity: 0.92;
              line-height: 1.35;
            "
          >
            Si no est√°s segura: elimina solo la tarjeta. El contenido se puede
            borrar despu√©s.
          </div>
        </div>

        <div
          style="
            display: flex;
            gap: 10px;
            justify-content: space-between;
            align-items: center;
            margin-top: 16px;
            flex-wrap: wrap;
          "
        >
          <button
            id="metaDelete"
            class="btn-white-outline"
            style="display: none; border-color: rgba(206, 17, 38, 0.55)"
          >
            üóëÔ∏è Eliminar
          </button>
          <div style="display: flex; gap: 10px; margin-left: auto">
            <button id="metaCancel" class="btn-white-outline">Cancelar</button>
            <button id="metaSave" class="btn-yellow">üíæ Guardar</button>
          </div>
        </div>
      </div>
    </div>

    <!-- ===== Admin: Add new course (course_meta doc) ===== -->
    <div id="addCourseModal" class="modal-backdrop" style="display: none">
      <div
        class="modal-card"
        role="dialog"
        aria-modal="true"
        aria-labelledby="addCourseModalTitle"
      >
        <div
          style="
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 12px;
          "
        >
          <h3
            id="addCourseModalTitle"
            style="margin: 0; font-size: 20px; font-weight: 900"
          >
            ‚ûï Nuevo curso
          </h3>
          <button
            id="addCourseClose"
            class="btn-white-outline"
            style="padding: 10px 14px"
          >
            ‚úï
          </button>
        </div>

        <p style="margin: 10px 0 0; opacity: 0.8; line-height: 1.35">
          Esto crea un documento en <strong>course_meta</strong>. Los temas se
          a√±aden despu√©s (en <strong>courses</strong>).
        </p>

        <label style="display: block; margin-top: 14px; font-weight: 800"
          >Nivel / ID (ej.: A1, A2, B1, B2, C1)</label
        >
        <input id="newCourseLevel" class="input" placeholder="Ej.: C1" />

        <label style="display: block; margin-top: 12px; font-weight: 800"
          >T√≠tulo</label
        >
        <input
          id="newCourseTitle"
          class="input"
          placeholder="T√≠tulo del curso"
        />

        <label style="display: block; margin-top: 12px; font-weight: 800"
          >Subt√≠tulo</label
        >
        <textarea
          id="newCourseSubtitle"
          class="input"
          rows="3"
          placeholder="Subt√≠tulo / descripci√≥n corta"
        ></textarea>

        <div
          style="
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
            margin-top: 14px;
          "
        >
          <div>
            <label style="display: block; font-weight: 800"
              >Color fondo (kafelek)</label
            >
            <input id="newCourseTileBg" class="input" placeholder="#ffffff" />
          </div>
          <div>
            <label style="display: block; font-weight: 800"
              >Color texto (kafelek)</label
            >
            <input id="newCourseTileText" class="input" placeholder="#111111" />
          </div>
          <div>
            <label style="display: block; font-weight: 800"
              >Texto bot√≥n principal</label
            >
            <input
              id="newCoursePrimaryLabel"
              class="input"
              placeholder="Entrar / Comprar / ..."
            />
          </div>
          <div>
            <label style="display: block; font-weight: 800"
              >Link bot√≥n principal (opcional)</label
            >
            <input
              id="newCoursePrimaryHref"
              class="input"
              placeholder="course.html?level=A1 o https://..."
            />
          </div>
          <div>
            <label style="display: block; font-weight: 800"
              >Color bot√≥n (fondo)</label
            >
            <input id="newCourseBtnBg" class="input" placeholder="#FCD34D" />
          </div>
          <div>
            <label style="display: block; font-weight: 800"
              >Color bot√≥n (texto)</label
            >
            <input id="newCourseBtnText" class="input" placeholder="#111111" />
          </div>
        </div>

        <div
          style="
            margin-top: 10px;
            font-size: 12px;
            opacity: 0.75;
            line-height: 1.35;
          "
        >
          Tips: wpisuj kolory w formacie <strong>#RRGGBB</strong>. Je≈õli
          zostawisz puste ‚Äî zostanƒÖ domy≈õlne style.
        </div>

        <div
          style="
            display: flex;
            gap: 10px;
            justify-content: flex-end;
            margin-top: 16px;
          "
        >
          <button id="addCourseCancel" class="btn-white-outline">
            Cancelar
          </button>
          <button id="addCourseCreate" class="btn-yellow">‚úÖ Crear</button>
        </div>
      </div>
    </div>

    <!-- ===== Admin Settings Modal (Planes y precios + Promos) ===== -->
    <div id="settingsModal" aria-hidden="true">
      <div class="modalBox">
        <div class="modalHead">
          <h3>‚öôÔ∏è Ajustes (Planes, precios, botones, promos)</h3>
          <button class="btn-white-outline" id="closeSettingsBtn" type="button">
            ‚úï Cerrar
          </button>
        </div>

        <div class="tabs">
          <button class="tabBtn active" type="button" data-tab="tabPlans">
            Planes y precios
          </button>
          <button class="tabBtn" type="button" data-tab="tabPromos">
            Descuentos y d√≠as gratis
          </button>
        </div>

        <div class="modalBody">
          <!-- Plans -->
          <div id="tabPlans">
            <div class="mini">
              Editas el contenido y el estilo de los bloques de ‚ÄúPlanes y
              precios‚Äù. Se guarda en <code>site_settings/panel_es</code>.
            </div>

            <div class="hr"></div>

            <h4 style="margin: 0 0 10px; font-size: 16px">A1‚ÄìA2</h4>
            <div class="grid3">
              <div>
                <label>Precio (texto)</label>
                <input id="set_price_A1A2" placeholder="180 z≈Ç / 3 meses" />
              </div>
              <div>
                <label>Texto bot√≥n</label>
                <input id="set_btnLabel_A1A2" placeholder="Comprar acceso" />
              </div>
              <div>
                <label>Link bot√≥n</label>
                <input
                  id="set_btnHref_A1A2"
                  placeholder="Contacto.html o link de pago"
                />
              </div>
            </div>
            <div class="grid2 row">
              <div>
                <label>Color tile (bg) #RRGGBB</label>
                <input id="set_tileBg_A1A2" placeholder="#003893" />
              </div>
              <div>
                <label>Color texto tile #RRGGBB</label>
                <input id="set_tileText_A1A2" placeholder="#FFFFFF" />
              </div>
            </div>
            <div class="grid2 row">
              <div>
                <label>Color bot√≥n (bg) #RRGGBB</label>
                <input id="set_btnBg_A1A2" placeholder="#FCD116" />
              </div>
              <div>
                <label>Color bot√≥n (texto) #RRGGBB</label>
                <input id="set_btnText_A1A2" placeholder="#0B1B3A" />
              </div>
            </div>

            <div class="hr"></div>

            <h4 style="margin: 0 0 10px; font-size: 16px">B1</h4>
            <div class="grid3">
              <div>
                <label>Precio (texto)</label
                ><input id="set_price_B1" placeholder="250 z≈Ç / 3 meses" />
              </div>
              <div>
                <label>Texto bot√≥n</label
                ><input id="set_btnLabel_B1" placeholder="Comprar acceso" />
              </div>
              <div>
                <label>Link bot√≥n</label
                ><input
                  id="set_btnHref_B1"
                  placeholder="Contacto.html o link de pago"
                />
              </div>
            </div>
            <div class="grid2 row">
              <div>
                <label>Color tile (bg)</label
                ><input id="set_tileBg_B1" placeholder="#003893" />
              </div>
              <div>
                <label>Color texto tile</label
                ><input id="set_tileText_B1" placeholder="#FFFFFF" />
              </div>
            </div>
            <div class="grid2 row">
              <div>
                <label>Color bot√≥n (bg)</label
                ><input id="set_btnBg_B1" placeholder="#FCD116" />
              </div>
              <div>
                <label>Color bot√≥n (texto)</label
                ><input id="set_btnText_B1" placeholder="#0B1B3A" />
              </div>
            </div>

            <div class="hr"></div>

            <h4 style="margin: 0 0 10px; font-size: 16px">B2</h4>
            <div class="grid3">
              <div>
                <label>Precio (texto)</label
                ><input id="set_price_B2" placeholder="350 z≈Ç / 3 meses" />
              </div>
              <div>
                <label>Texto bot√≥n</label
                ><input id="set_btnLabel_B2" placeholder="Comprar acceso" />
              </div>
              <div>
                <label>Link bot√≥n</label
                ><input
                  id="set_btnHref_B2"
                  placeholder="Contacto.html o link de pago"
                />
              </div>
            </div>
            <div class="grid2 row">
              <div>
                <label>Color tile (bg)</label
                ><input id="set_tileBg_B2" placeholder="#003893" />
              </div>
              <div>
                <label>Color texto tile</label
                ><input id="set_tileText_B2" placeholder="#FFFFFF" />
              </div>
            </div>
            <div class="grid2 row">
              <div>
                <label>Color bot√≥n (bg)</label
                ><input id="set_btnBg_B2" placeholder="#FCD116" />
              </div>
              <div>
                <label>Color bot√≥n (texto)</label
                ><input id="set_btnText_B2" placeholder="#0B1B3A" />
              </div>
            </div>

            <div class="actions">
              <button
                class="btn-white-outline"
                type="button"
                id="resetSettingsBtn"
              >
                ‚Ü©Ô∏é Reset
              </button>
              <button
                class="btn-yellow"
                type="button"
                id="saveSettingsBtn"
                style="font-weight: 900"
              >
                üíæ Guardar
              </button>
            </div>
          </div>

          <!-- Promos -->
          <div id="tabPromos" style="display: none">
            <div class="mini">
              Tu ‚Äúcheckout‚Äù mo≈ºe u≈ºyƒá tego samego kodu. Tu zapisujemy kody do
              Firestore w kolekcji <code>promo_codes</code>.
            </div>

            <div class="hr"></div>

            <div class="grid3">
              <div>
                <label>Kod rabatowy (ID)</label>
                <input id="promo_code" placeholder="NP. AQUI10" />
              </div>
              <div>
                <label>Rabat % (0‚Äì100)</label>
                <input id="promo_pct" placeholder="10" inputmode="numeric" />
              </div>
              <div>
                <label>Dni gratis (trial)</label>
                <input id="promo_days" placeholder="7" inputmode="numeric" />
              </div>
            </div>
            <div class="grid2 row">
              <div>
                <label>Aktywny?</label>
                <select id="promo_active">
                  <option value="true">S√≠</option>
                  <option value="false">No</option>
                </select>
              </div>
              <div>
                <label>Opis (opcjonalnie)</label>
                <input
                  id="promo_note"
                  placeholder="np. campa√±a enero / IG / etc."
                />
              </div>
            </div>

            <div class="actions">
              <button
                class="btn-yellow"
                type="button"
                id="addPromoBtn"
                style="font-weight: 900"
              >
                ‚ûï Guardar c√≥digo
              </button>
            </div>

            <div class="hr"></div>

            <h4 style="margin: 0; font-size: 16px">Lista kod√≥w</h4>
            <div id="promoList"></div>
          </div>
        </div>
      </div>
    </div>

    
  <script type="module" src="assets/js/pages/panel-page.js"></script>
</body>
</html>

