<!doctype html>
<html lang="es">
  <head>
    <meta charset="utf-8" />
    <title>Panel del estudiante | AquiVivo</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700;900&family=Playfair+Display:wght@700;900&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="assets/css/styles.css" />
    <script src="assets/js/layout.js" type="module"></script>
  </head>

  <body data-page="panel">
    <div id="appHeader"></div>

    <main class="page">
      <div class="container">
        <div class="panelHeroGrid">
          <div class="panelHeroLeft">
            <div class="heroBanner" style="align-self: start">
              <div class="heroTitleRow">
                <div class="heroIcon heroIcon--avatar" id="userAvatarWrap">
                  <img id="userAvatarImg" alt="Foto de perfil" />
                  <span id="userAvatarFallback">üéì</span>
                </div>
                <div>
                  <h1 class="glow-text" id="panelTitle" style="margin: 0; font-size: 44px">
                    ¬°Buenas!
                  </h1>
                  <div class="muted" id="panelSubtitle" style="margin-top: 6px">
                    Aqu√≠ tienes tu libreta!<br />¬°Qu√© chimba verte!
                  </div>
                  <div class="metaRow" style="margin-top: 10px; gap: 10px; flex-wrap: wrap">
                    <button class="btn-white-outline" id="btnAvatarUpload" type="button">
                      Cambiar foto
                    </button>
                    <button class="btn-white-outline" id="btnAvatarRemove" type="button">
                      Quitar foto
                    </button>
                    <span class="hintSmall" id="avatarMsg"></span>
                    <input id="avatarFile" type="file" accept="image/*" style="display: none" />
                  </div>
                </div>
              </div>

              <div
                class="metaRow"
                style="margin-top: 14px; flex-wrap: wrap; gap: 10px"
              >
                <span
                  >üë§ <b id="userEmail">...</b>
                  <span id="adminBadge" style="margin-left: 10px"
                    >(admin: ‚Äî)</span
                  ></span
                >

                <!-- ‚úÖ Access status pills (Krok 11) -->
                <span id="accessPill" style="display: none"></span>
                <span id="planPill" style="display: none"></span>
                <span id="untilPill" style="display: none"></span>

                <span
                  id="adminLinkWrap"
                  class="metaRow"
                  style="margin-left: auto"
                ></span>
              </div>
            </div>
            <div class="card" id="trialCard">
              <div class="sectionTitle" style="margin-top: 0">
                üéÅ Prueba gratis A1
              </div>
              <div class="metaRow" style="margin-top: 10px; gap: 10px; flex-wrap: wrap">
                <button class="btn-yellow" id="btnTrialA1" type="button">
                  Activa A1 gratis 7 d√≠as
                </button>
              </div>
              <div class="hintSmall" id="trialMsg" style="margin-top: 8px; display: none"></div>
            </div>
            <div class="card" id="lastActivityCard">
              <div class="sectionTitle" style="margin-top: 0">
                üïí √öltima actividad
              </div>
              <div class="muted" id="lastActivityWhen">‚Äî</div>
              <div
                style="margin-top: 10px; font-weight: 900"
                id="lastActivityTitle"
              >
                ‚Äî
              </div>
              <div style="margin-top: 12px">
                <a id="lastActivityLink" class="btn-white-outline" href="#"
                  >Continuar</a
                >
              </div>

              <div class="hr"></div>
            </div>
            <div class="card" id="progressSummaryCard">
              <div class="sectionTitle" style="margin-top: 0">Progreso</div>
              <div
                class="metaRow"
                style="margin-top: 10px; gap: 10px; flex-wrap: wrap"
              >
                <span id="progTopics">Temas: -</span>
                <span id="progCompleted">Completados: -</span>
                <span id="progPractice">Pr√°ctica: -</span>
                <span id="progTest">Test: -</span>
              </div>
              <div class="hintSmall" id="progLastActivity" style="margin-top: 8px">
                √öltima actividad: -
              </div>
            </div>
            <div class="card" id="reviewSummaryCard">
              <div class="sectionTitle" style="margin-top: 0">Repaso</div>
              <div
                class="metaRow"
                style="margin-top: 10px; gap: 10px; flex-wrap: wrap"
              >
                <span id="reviewDue">Para hoy: -</span>
                <span id="reviewOverdue">Atrasadas: -</span>
                <span id="reviewNew">Nuevas: -</span>
              </div>
              <div class="hintSmall" id="reviewPlan" style="margin-top: 8px">
                Plan: 10 min al d√≠a
              </div>
              <div id="reviewWeek" class="reviewWeek" style="margin-top: 10px"></div>
              <div class="metaRow" style="margin-top: 12px; gap: 10px">
                <a class="btn-yellow" href="review.html">Empezar 10 min</a>
                <a class="btn-white-outline" href="flashcards.html">Fichas</a>
                <span class="hintSmall" id="reviewHint"></span>
              </div>
              <div class="hr"></div>
              <div class="sectionTitle" style="margin-top: 0">Ajustes</div>
              <div class="metaRow" style="gap: 10px; flex-wrap: wrap">
                <label class="hintSmall" style="font-weight: 900">Plan diario</label>
                <select id="reviewMinutes" class="select" style="min-width: 160px">
                  <option value="5">5 min</option>
                  <option value="10">10 min</option>
                  <option value="15">15 min</option>
                </select>
                <label class="hintSmall" style="font-weight: 900">Tarjetas/d√≠a</label>
                <select id="reviewLimit" class="select" style="min-width: 160px">
                  <option value="10">10</option>
                  <option value="20">20</option>
                  <option value="30">30</option>
                </select>
                <label class="hintSmall" style="font-weight: 900">Direcci√≥n</label>
                <select id="reviewDirection" class="select" style="min-width: 200px">
                  <option value="pl_es">PL ‚Üí ES</option>
                  <option value="es_pl">ES ‚Üí PL</option>
                  <option value="mixed">Mixto</option>
                </select>
                <button class="btn-white-outline" id="reviewSave" type="button">
                  Guardar
                </button>
                <span class="hintSmall" id="reviewSaveStatus"></span>
              </div>
            </div>
            <div class="card" id="userSettingsCard">
              <div class="sectionTitle" style="margin-top: 0">Ajustes del perfil</div>
              <div class="metaRow" style="gap: 10px; flex-wrap: wrap">
                <input
                  id="setDisplayName"
                  class="input"
                  placeholder="Nombre visible"
                  style="min-width: 220px"
                />
                <select id="setGender" class="select" style="min-width: 160px">
                  <option value="">Saludo neutro</option>
                  <option value="mami">Mami</option>
                  <option value="papi">Papi</option>
                </select>
                <select id="setLang" class="select" style="min-width: 160px">
                  <option value="es">Espa√±ol</option>
                  <option value="pl">Polski</option>
                </select>
                <select id="setGoal" class="select" style="min-width: 180px">
                  <option value="5">Meta: 5 min</option>
                  <option value="10">Meta: 10 min</option>
                  <option value="15">Meta: 15 min</option>
                  <option value="20">Meta: 20 min</option>
                </select>
                <label class="hintSmall" style="display: flex; gap: 8px; align-items: center">
                  <input id="setReviewReminders" type="checkbox" />
                  Recordatorios de repaso
                </label>
                <button class="btn-white-outline" id="btnSaveSettings" type="button">
                  Guardar
                </button>
                <span class="hintSmall" id="settingsMsg"></span>
              </div>
            </div>
            <div class="card" id="userReportCard">
              <div class="sectionTitle" style="margin-top: 0">Reportar un problema</div>
              <div class="muted">Cuentalo y lo revisamos.</div>
              <div class="metaRow" style="margin-top: 10px; gap: 10px; flex-wrap: wrap; align-items: flex-end">
                <select id="userReportType" class="select" style="min-width: 180px">
                  <option value="bug">Bug</option>
                  <option value="content">Contenido</option>
                  <option value="payment">Pago</option>
                  <option value="other" selected>Otro</option>
                </select>
                <select id="userReportLevel" class="select" style="min-width: 160px">
                  <option value="">Nivel (opcional)</option>
                  <option value="A1">A1</option>
                  <option value="A2">A2</option>
                  <option value="B1">B1</option>
                  <option value="B2">B2</option>
                </select>
                <input id="userReportTopic" class="input" placeholder="ID tema (opcional)" style="min-width: 200px" />
                <input id="userReportMessage" class="input" placeholder="Describe el problema..." style="min-width: 260px; flex: 1" />
                <button class="btn-white-outline" id="btnUserReport" type="button">Enviar</button>
                <span class="hintSmall" id="userReportStatus"></span>
              </div>
            </div>
          </div>
          <div class="referralSide">
            <div class="card card--promo referral-card referral-card--compact" id="referralCard">
            <div class="sectionTitle" style="margin-top: 0">
              üéÅ Tengo c√≥digo de un pana üòé
            </div>
            <div class="muted">
              Comp√°rtelo con tus panas. Si lo usan, t√∫ ganas algo tambi√©n üòâ
            </div>

            <div
              class="metaRow"
              style="margin-top: 12px; gap: 10px; align-items: center"
            >
              <input
                id="myRefCode"
                class="input"
                disabled
                style="max-width: 220px; font-weight: 900"
              />
              <button
                id="btnCopyMyRefCode"
                class="btn-white-outline"
                type="button"
              >
                üìã Copiar
              </button>
            </div>

            <div id="myRefInfo" class="hintSmall" style="margin-top: 8px"></div>

            <div class="hr"></div>

            <details class="refDetails">
              <summary>üéÅ Tengo c√≥digo de un pana üòé</summary>
              <div class="muted">Escribe el c√≥digo para asociarlo a tu cuenta.</div>
              <div
                class="metaRow"
                style="
                  margin-top: 10px;
                  gap: 10px;
                  align-items: center;
                  flex-wrap: wrap;
                "
              >
                <input
                  id="useRefCode"
                  class="input"
                  placeholder="ej. MAGDAL-8F3K"
                  style="max-width: 220px"
                />
                <button id="btnApplyRefCode" class="btn-yellow" type="button">
                  Aplicar
                </button>
                <span id="applyRefStatus" class="hintSmall"></span>
              </div>
            </details>

            <div class="hr"></div>

            <details class="refDetails">
              <summary>üìà C√≥mo van mis c√≥digos</summary>
              <div
                class="metaRow"
                style="margin-top: 10px; gap: 10px; flex-wrap: wrap"
              >
                <span id="refStatInvites">üë• Recomendaciones: 0</span>
                <span id="refStatRewards">üé´ Recompensas: 0</span>
              </div>
              <div id="refRewardsList" class="muted" style="margin-top: 10px"></div>
              <div
                id="refRewardsActions"
                class="muted"
                style="margin-top: 10px"
              ></div>
            </details>
            </div>
            <div class="card promo-mini" id="promoMini">
              <div class="promo-mini-title">üíõ T√∫ ganas 20%</div>
              <div class="promo-mini-sub">ü§ù Tu amigo 10%</div>
            </div>
          </div>
          </div>
        </div>

        <div class="card coursesSection" style="margin-top: 16px">
          <div class="sectionTitle" style="margin-top: 0">üìö Cursos</div>
          <div class="muted">Selecciona un nivel para empezar.</div>
          <div
            id="coursesCards"
            class="coursesGrid"
            style="margin-top: 12px"
          ></div>
        </div>

        <div class="referralRow" style="margin-top: 16px"></div>


        <!-- Settings modal (placeholder for panel-page.js) -->
        <div id="adminModal" class="modalOverlay" aria-hidden="true">
          <div class="modalCard">
            <div class="modalHead">
              <div class="modalTitle">Admin / Ajustes</div>
              <button
                id="closeSettingsBtn"
                class="btn-white-outline"
                type="button"
              >
                ‚úñ
              </button>
            </div>
            <div class="hr"></div>

            <!-- host for extra buttons preview -->
            <div id="extraButtonsHost" class="metaRow"></div>
            <div
              id="extraButtonsPreview"
              class="muted"
              style="margin-top: 10px"
            ></div>

            <div class="hr"></div>

            <!-- Prices placeholders -->
            <div class="panelGrid">
              <div class="card">
                <div class="sectionTitle" style="margin-top: 0">Precios</div>
                <div class="metaRow">
                  <input
                    id="adm_price_A1A2"
                    type="number"
                    placeholder="A1/A2"
                  />
                  <input id="adm_price_B1" type="number" placeholder="B1" />
                  <input id="adm_price_B2" type="number" placeholder="B2" />
                </div>
              </div>
            </div>

            <div
              class="metaRow"
              style="margin-top: 12px; justify-content: flex-end"
            >
              <button id="userClose" class="btn-white-outline" type="button">
                Cerrar
              </button>
            </div>
          </div>
        </div>

        <!-- Meta modal placeholders -->
        <div id="metaModal" class="modalOverlay" aria-hidden="true">
          <div class="modalCard">
            <div class="modalHead">
              <div class="modalTitle">Editar meta del curso</div>
              <button id="metaClose" class="btn-white-outline" type="button">
                ‚úñ
              </button>
            </div>
            <div class="hr"></div>

            <div class="panelGrid">
              <div class="card">
                <div class="sectionTitle" style="margin-top: 0">Nivel</div>
                <div id="metaLevel" class="muted">‚Äî</div>
                <div style="margin-top: 12px">
                  <label class="muted" style="font-weight: 900">Title</label>
                  <input id="metaTitle" type="text" />
                </div>
                <div style="margin-top: 10px">
                  <label class="muted" style="font-weight: 900">Subtitle</label>
                  <input id="metaSubtitle" type="text" />
                </div>
              </div>

              <div class="card">
                <div class="sectionTitle" style="margin-top: 0">
                  Bot√≥n / Tile
                </div>
                <div class="metaRow">
                  <input
                    id="metaPrimaryLabel"
                    type="text"
                    placeholder="Primary label"
                  />
                  <input
                    id="metaPrimaryHref"
                    type="text"
                    placeholder="Primary href"
                  />
                </div>
                <div class="metaRow" style="margin-top: 10px">
                  <input id="metaBtnText" type="text" placeholder="Btn text" />
                  <input id="metaBtnBg" type="text" placeholder="Btn bg" />
                </div>
                <div class="metaRow" style="margin-top: 10px">
                  <input
                    id="metaTileText"
                    type="text"
                    placeholder="Tile text"
                  />
                  <input id="metaTileBg" type="text" placeholder="Tile bg" />
                </div>
              </div>
            </div>

            <div
              class="metaRow"
              style="margin-top: 12px; justify-content: flex-end"
            >
              <button id="metaSave" class="btn-yellow" type="button">
                Guardar
              </button>
              <button id="metaCancel" class="btn-white-outline" type="button">
                Cancelar
              </button>
              <span
                id="metaDeleteWrap"
                style="margin-left: auto; display: none"
              >
                <button id="metaDelete" class="btn-red" type="button">
                  Eliminar
                </button>
                <button id="metaDeleteWithData" class="btn-red" type="button">
                  Eliminar con datos
                </button>
              </span>
            </div>
          </div>
        </div>

        <!-- Add course modal placeholders -->
        <div id="addCourseModal" class="modalOverlay" aria-hidden="true">
          <div class="modalCard">
            <div class="modalHead">
              <div class="modalTitle">Nuevo curso</div>
              <button
                id="addCourseClose"
                class="btn-white-outline"
                type="button"
              >
                ‚úñ
              </button>
            </div>
            <div class="hr"></div>

            <div class="panelGrid">
              <div class="card">
                <div class="sectionTitle" style="margin-top: 0">Nivel</div>
                <select id="newCourseLevel">
                  <option value="A1">A1</option>
                  <option value="A2">A2</option>
                  <option value="B1">B1</option>
                  <option value="B2">B2</option>
                </select>
                <div style="margin-top: 10px">
                  <label class="muted" style="font-weight: 900">Title</label>
                  <input id="newCourseTitle" type="text" />
                </div>
                <div style="margin-top: 10px">
                  <label class="muted" style="font-weight: 900">Subtitle</label>
                  <input id="newCourseSubtitle" type="text" />
                </div>
              </div>

              <div class="card">
                <div class="sectionTitle" style="margin-top: 0">
                  Bot√≥n / Tile
                </div>
                <div class="metaRow">
                  <input
                    id="newCoursePrimaryLabel"
                    type="text"
                    placeholder="Primary label"
                  />
                  <input
                    id="newCoursePrimaryHref"
                    type="text"
                    placeholder="Primary href"
                  />
                </div>
                <div class="metaRow" style="margin-top: 10px">
                  <input
                    id="newCourseBtnText"
                    type="text"
                    placeholder="Btn text"
                  />
                  <input id="newCourseBtnBg" type="text" placeholder="Btn bg" />
                </div>
                <div class="metaRow" style="margin-top: 10px">
                  <input
                    id="newCourseTileText"
                    type="text"
                    placeholder="Tile text"
                  />
                  <input
                    id="newCourseTileBg"
                    type="text"
                    placeholder="Tile bg"
                  />
                </div>
              </div>
            </div>

            <div
              class="metaRow"
              style="margin-top: 12px; justify-content: flex-end"
            >
              <button id="addCourseCreate" class="btn-yellow" type="button">
                Crear
              </button>
              <button
                id="addCourseCancel"
                class="btn-white-outline"
                type="button"
              >
                Cancelar
              </button>
            </div>
          </div>
        </div>

        <!-- legacy placeholders required by panel-page.js but not shown -->
        <a id="adm_btn_href" style="display: none"></a>
        <input id="adm_btn_text" style="display: none" />
        <input id="adm_btn_style" style="display: none" />
        <input id="addCourseBtn" style="display: none" />
        <div id="metaDeleteWrap" style="display: none"></div>
        <div id="metaDelete" style="display: none"></div>
        <div id="metaDeleteWithData" style="display: none"></div>
        <div id="metaSave" style="display: none"></div>
        <div id="metaCancel" style="display: none"></div>
      </div>
    </main>

    <script type="module" src="assets/js/pages/panel-page.js"></script>
  </body>
</html>
