<!doctype html>
<html lang="pl">
  <head>
    <meta charset="utf-8" />
    <title>Admin | AquiVivo</title>
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />
    <link href="assets/css/styles.css" rel="stylesheet" />
    <script src="assets/js/layout.js" type="module"></script>
  </head>
  <body data-page="esadmin">
    <div id="appHeader"></div>
    <main class="page">
      <div class="container">
        <section class="heroBanner">
          <div class="heroTitleRow">
            <div class="heroIcon">&#x1F6E0;&#xFE0F;</div>
            <div>
              <div class="metaRow" style="flex-wrap: wrap; gap: 10px">
                <a class="btn-yellow" href="admin-select.html?type=lesson"
                  >Admin lekcji</a
                >
                <a
                  class="btn-white-outline"
                  href="admin-select.html?type=exercise"
                  >Admin cwiczen</a
                >
                <a class="btn-white-outline" href="admin-wizard.html"
                  >Kreator</a
                >
                <a class="btn-white-outline" href="#accUsers">Uzytkownicy</a>
                <a class="btn-white-outline" href="#accPromo"
                  >Kody promo</a
                >
                <a class="btn-white-outline" href="#accSegments"
                  >Segmentacja</a
                >
              </div>
            </div>
          </div>
        </section>
        <!-- Dashboard (akordeon - domyslnie otwarty) -->
        <details class="card" id="accDashboard">
          <summary
            class="sectionTitle"
            style="cursor: pointer; list-style: none"
          >
            Pulpit
            <span class="hintSmall" style="font-weight: 600; margin-left: 8px"
              >(kliknij aby otworzyc/zamknac)</span
            >
          </summary>
          <div style="margin-top: 10px">
            <p class="subtitle">
              Szybkie podsumowanie (liczniki z Firestore). Kliknij karte, aby
              zobaczyc szczegoly.
            </p>
            <div class="metaRow" style="flex-wrap: wrap; gap: 10px">
              <button
                class="btn-white-outline"
                id="btnRefreshStats"
                type="button"
              >
                Odswiez
              </button>
              <span class="hintSmall" id="statsStatus"></span>
            </div>
            <div class="panelGrid" style="margin-top: 12px">
              <div
                class="card statCard"
                data-details="statUsersDetails"
                data-expand="users"
              >
                <div class="muted" style="font-weight: 900">Uzytkownicy</div>
                <div
                  id="statUsers"
                  style="font-size: 34px; font-weight: 900; margin-top: 6px"
                >
                  -
                </div>
                <div class="hintSmall">Suma w users</div>
                <div
                  class="statDetails"
                  id="statUsersDetails"
                  style="display: none; margin-top: 12px"
                ></div>
              </div>
              <div
                class="card statCard"
                data-details="statPremiumPlanDetails"
                data-expand="premium"
              >
                <div class="muted" style="font-weight: 900">
                  Plan premium
                </div>
                <div
                  id="statPremiumPlan"
                  style="font-size: 34px; font-weight: 900; margin-top: 6px"
                >
                  -
                </div>
                <div class="hintSmall">uzytkownicy gdzie plan == "premium"</div>
                <div
                  class="statDetails"
                  id="statPremiumPlanDetails"
                  style="display: none; margin-top: 12px"
                ></div>
              </div>
              <div
                class="card statCard"
                data-details="statAccessTrueDetails"
                data-expand="access"
              >
                <div class="muted" style="font-weight: 900">access=true</div>
                <div
                  id="statAccessTrue"
                  style="font-size: 34px; font-weight: 900; margin-top: 6px"
                >
                  -
                </div>
                <div class="hintSmall">uzytkownicy gdzie access == true</div>
                <div
                  class="statDetails"
                  id="statAccessTrueDetails"
                  style="display: none; margin-top: 12px"
                ></div>
              </div>
              <div
                class="card statCard"
                data-details="statBlockedDetails"
                data-expand="blocked"
              >
                <div class="muted" style="font-weight: 900">Zablokowani</div>
                <div
                  id="statBlocked"
                  style="font-size: 34px; font-weight: 900; margin-top: 6px"
                >
                  -
                </div>
                <div class="hintSmall">uzytkownicy gdzie blocked == true</div>
                <div
                  class="statDetails"
                  id="statBlockedDetails"
                  style="display: none; margin-top: 12px"
                ></div>
              </div>
              <div
                class="card statCard"
                data-details="statOneTopicDetails"
                data-expand="oneTopic"
              >
                <div class="muted" style="font-weight: 900">
                  1 temat otwarty
                </div>
                <div
                  id="statOneTopic"
                  style="font-size: 34px; font-weight: 900; margin-top: 6px"
                >
                  -
                </div>
                <div class="hintSmall">uzytkownicy gdzie openedTopicsCount == 1</div>
                <div
                  class="statDetails"
                  id="statOneTopicDetails"
                  style="display: none; margin-top: 12px"
                ></div>
              </div>
              <div
                class="card statCard"
                data-details="statCoursesDetails"
                data-expand="courses"
              >
                <div class="muted" style="font-weight: 900">Tematy</div>
                <div
                  id="statCourses"
                  style="font-size: 34px; font-weight: 900; margin-top: 6px"
                >
                  -
                </div>
                <div class="hintSmall">dokumenty w courses</div>
                <div
                  class="statDetails"
                  id="statCoursesDetails"
                  style="display: none; margin-top: 12px"
                ></div>
              </div>
              <div
                class="card statCard"
                data-details="statExercisesDetails"
                data-expand="exercises"
              >
                <div class="muted" style="font-weight: 900">Cwiczenia</div>
                <div
                  id="statExercises"
                  style="font-size: 34px; font-weight: 900; margin-top: 6px"
                >
                  -
                </div>
                <div class="hintSmall">dokumenty w exercises</div>
                <div
                  class="statDetails"
                  id="statExercisesDetails"
                  style="display: none; margin-top: 12px"
                ></div>
              </div>
            </div>
          </div>
        </details>
        <!-- Segmentacja (akordeon - domyslnie zamkniety) -->
        <details class="card" id="accSegments">
          <summary
            class="sectionTitle"
            style="cursor: pointer; list-style: none"
          >
            Segmentacja (marketing)
            <span class="hintSmall" style="font-weight: 600; margin-left: 8px"
              >(kliknij aby otworzyc/zamknac)</span
            >
          </summary>
          <div style="margin-top: 10px">
            <p class="subtitle">
              Szybkie listy: wygasa wkrotce, premium aktywny, bez dostepu (ok.).
              Mozesz eksportowac CSV.
            </p>
            <div class="metaRow" style="flex-wrap: wrap; gap: 10px">
              <button class="btn-white-outline" id="btnLoadExp0" type="button">
                Wygasa dzis
              </button>
              <button class="btn-white-outline" id="btnLoadExp3" type="button">
                Wygasa za 3 dni
              </button>
              <button class="btn-white-outline" id="btnLoadExp7" type="button">
                Wygasa za 7 dni
              </button>
              <button class="btn-white-outline" id="btnLoadExp14" type="button">
                Wygasa za 14 dni
              </button>
              <button
                class="btn-white-outline"
                id="btnLoadPremiumActive"
                type="button"
              >
                Premium aktywny (accessUntil)
              </button>
              <button
                class="btn-white-outline"
                id="btnLoadFreeUsers"
                type="button"
              >
                Bez dostepu (ok.)
              </button>
              <button
                class="btn-white-outline"
                id="btnLoadOneTopic"
                type="button"
              >
                Tylko 1 temat
              </button>
              <button
                class="btn-white-outline"
                id="btnLoadOneTopicInactive"
                type="button"
              >
                1 temat - nieaktywny 7 dni
              </button>
              <button class="btn-yellow" id="btnExportSegment" type="button">
                Eksportuj CSV
              </button>
              <span
                class="hintSmall"
                id="segmentStatus"
                style="margin-left: auto"
              ></span>
            </div>
            <div class="hr"></div>
            <div class="sectionTitle" style="margin-top: 0">Wyniki</div>
            <div class="list" id="segmentList"></div>
          </div>
        </details>
        <!-- Kody promo (akordeon - domyslnie zamkniety) -->
        <details class="card" id="accPromo">
          <summary
            class="sectionTitle"
            style="cursor: pointer; list-style: none"
          >
            Kody promo
            <span class="hintSmall" style="font-weight: 600; margin-left: 8px"
              >(kliknij aby otworzyc/zamknac)</span
            >
          </summary>
          <div class="hr"></div>
          <div class="sectionTitle" style="margin-top: 0">
            Ustawienia polecen
          </div>
          <div
            class="metaRow"
            style="flex-wrap: wrap; gap: 10px; align-items: flex-end"
          >
            <div style="min-width: 220px">
              <label class="muted" style="font-weight: 900">% znizki</label>
              <input
                class="input"
                id="refOwnerPercent"
                max="100"
                min="0"
                placeholder="np. 20"
                step="1"
                type="number"
              />
            </div>
            <div style="min-width: 320px; flex: 1">
              <label class="muted" style="font-weight: 900"
                >Opis / zakres</label
              >
              <input
                class="input"
                id="refRewardScope"
                placeholder="np. 20% en otros servicios"
              />
            </div>
            <button
              class="btn-yellow"
              id="btnSaveReferralSettings"
              type="button"
            >
              Zapisz
            </button>
            <span
              class="hintSmall"
              id="refSettingsStatus"
              style="margin-left: auto"
            ></span>
          </div>
          <div class="hintSmall" style="margin-top: 10px">
            Zapisane w: <b>promo_codes/_REFERRAL_SETTINGS</b>
          </div>

          <div style="margin-top: 10px">
            <p class="subtitle">
              Tworz, aktywuj i wylaczaj kody. Uzytkownicy stosuja je w panelu.
            </p>
            <div
              class="metaRow"
              style="flex-wrap: wrap; gap: 10px; align-items: flex-end"
            >
              <div style="min-width: 220px">
                <label class="muted" style="font-weight: 900"
                  >Kod (ID)</label
                >
                <input
                  class="input"
                  id="promoCode"
                  placeholder="np. START2026"
                />
              </div>
              <div style="min-width: 160px">
                <label class="muted" style="font-weight: 900">Dni</label>
                <input
                  class="input"
                  id="promoDays"
                  min="0"
                  placeholder="np. 30"
                  step="1"
                  type="number"
                />
              </div>
              <div style="min-width: 170px">
                <label class="muted" style="font-weight: 900">Wygasa</label>
                <input class="input" id="promoExpires" type="date" />
              </div>
              <div style="min-width: 180px">
                <label class="muted" style="font-weight: 900">Plan</label>
                <select class="select" id="promoPlan">
                  <option selected="" value="premium">premium</option>
                  <option value="premium_a1">premium_a1 (A1+A2)</option>
                  <option value="premium_b1">premium_b1 (A1+A2+B1)</option>
                  <option value="premium_b2">premium_b2 (A1+A2+B1+B2)</option>
                  <option value="VIP A1 + A2 + B1">VIP A1 + A2 + B1</option>
                  <option value="VIP A1 + A2 + B1 + B2">
                    VIP A1 + A2 + B1 + B2
                  </option>
                  <option value="a1">A1</option>
                  <option value="a2">A2</option>
                  <option value="b1">B1</option>
                  <option value="b2">B2</option>
                  <option value="free">free</option>
                </select>
              </div>
              <div style="min-width: 220px; flex: 1">
                <label class="muted" style="font-weight: 900">Notatka</label>
                <input
                  class="input"
                  id="promoNote"
                  placeholder="np. Tylko nowi uzytkownicy"
                />
              </div>
              <label style="gap: 10px; align-items: center">
                <input
                  checked=""
                  id="promoActive"
                  style="width: 18px; height: 18px; margin: 0"
                  type="checkbox"
                />
                Aktywny
              </label>
              <label style="gap: 10px; align-items: center">
                <input
                  checked=""
                  id="promoStack"
                  style="width: 18px; height: 18px; margin: 0"
                  type="checkbox"
                />
                Sumuj dni
              </label>
              <label style="gap: 10px; align-items: center">
                <input
                  id="promoRepeat"
                  style="width: 18px; height: 18px; margin: 0"
                  type="checkbox"
                />
                Powtarzalny
              </label>
              <button class="btn-yellow" id="btnSavePromoCode" type="button">
                Zapisz
              </button>
              <button
                class="btn-white-outline"
                id="btnClearPromoForm"
                type="button"
              >
                Wyczysc
              </button>
              <span
                class="hintSmall"
                id="promoStatus"
                style="margin-left: auto"
              ></span>
            </div>
            <div class="hr"></div>
            <div class="sectionTitle" style="margin-top: 0">
              Lista kodow
            </div>
            <div class="list" id="promoListAdmin"></div>
          </div>
        </details>
        <details class="card" id="accServices">
          <summary class="sectionTitle">
            Uslugi (oferta)
            <span class="hintSmall" style="font-weight: 600; margin-left: 8px"
              >(CRUD)</span
            >
          </summary>
          <div style="margin-top: 12px">
            <div class="rowBetween" style="gap: 10px; flex-wrap: wrap">
              <div class="subtitle" style="margin: 0">
                Dodaj / edytuj uslugi widoczne na <b>services.html</b>.
              </div>
              <button
                class="btn-white-outline"
                id="btnReloadServicesAdmin"
                type="button"
              >
                Odswiez
              </button>
            </div>
            <div class="hr"></div>
            <div
              class="metaRow"
              style="flex-wrap: wrap; gap: 10px; align-items: flex-end"
            >
              <div style="min-width: 240px; flex: 1">
                <label class="muted" style="font-weight: 900">SKU (ID)</label>
                <input class="input" id="svcSku" placeholder="np. CONSULT_60" />
              </div>
              <div style="min-width: 220px">
                <label class="muted" style="font-weight: 900">Kategoria</label>
                <select class="select" id="svcCategory">
                  <option value="plans">plany</option>
                  <option value="consultas">konsultacje</option>
                  <option value="servicios">uslugi</option>
                  <option value="extras" selected="">dodatki</option>
                  <option value="ebooks">ebooki</option>
                </select>
              </div>
              <div style="min-width: 240px; flex: 1">
                <label class="muted" style="font-weight: 900">Tytul</label>
                <input
                  class="input"
                  id="svcTitle"
                  placeholder="np. Konsultacja 60 min"
                />
              </div>
              <div style="min-width: 260px; flex: 1">
                <label class="muted" style="font-weight: 900"
                  >Opis</label
                >
                <input class="input" id="svcDesc" placeholder="Krotki opis..." />
              </div>
              <div style="min-width: 160px">
                <label class="muted" style="font-weight: 900">Cena</label>
                <input class="input" id="svcPrice" placeholder="np. 49 EUR" />
              </div>
              <div style="min-width: 160px">
                <label class="muted" style="font-weight: 900">Etykieta</label>
                <input class="input" id="svcBadge" placeholder="np. Popularny" />
              </div>
              <div style="min-width: 120px">
                <label class="muted" style="font-weight: 900">Kolejnosc</label>
                <input
                  class="input"
                  id="svcOrder"
                  min="0"
                  placeholder="0"
                  step="1"
                  type="number"
                />
              </div>
              <div style="min-width: 160px">
                <label class="muted" style="font-weight: 900">Typ CTA</label>
                <select class="select" id="svcCtaType">
                  <option selected="" value="info">info</option>
                  <option value="link">link</option>
                  <option value="payhip">payhip</option>
                  <option value="stripe">stripe</option>
                </select>
              </div>
              <div style="min-width: 260px; flex: 1">
                <label class="muted" style="font-weight: 900"
                  >CTA url / kod Payhip (stripe: puste)</label
                >
                <input
                  class="input"
                  id="svcCtaUrl"
                  placeholder="link/payhip: https://... lub kod - stripe: zostaw puste"
                />
              </div>
              <div style="min-width: 180px">
                <label class="muted" style="font-weight: 900">Etykieta CTA</label>
                <input
                  class="input"
                  id="svcCtaLabel"
                  placeholder="np. Kup / Zarezerwuj"
                />
              </div>
              <div style="min-width: 140px">
                <label class="muted" style="font-weight: 900">Aktywny</label>
                <select class="select" id="svcActive">
                  <option selected="" value="true">true</option>
                  <option value="false">false</option>
                </select>
              </div>
              <button class="btn-yellow" id="btnSaveService" type="button">
                Zapisz
              </button>
              <button
                class="btn-white-outline"
                id="btnClearService"
                type="button"
              >
                Wyczysc
              </button>
              <span
                class="hintSmall"
                id="svcStatus"
                style="margin-left: auto"
              ></span>
            </div>
            <div class="hr"></div>
            <div class="list" id="servicesAdminList"></div>
          </div>
        </details>

        <!-- Uzytkownicy (akordeon - domyslnie zamkniety) -->
        <details class="card" id="accUsers">
          <summary
            class="sectionTitle"
            style="cursor: pointer; list-style: none"
          >
            Uzytkownicy
            <span class="hintSmall" style="font-weight: 600; margin-left: 8px"
              >(kliknij aby otworzyc/zamknac)</span
            >
          </summary>
          <div style="margin-top: 10px">
            <p class="subtitle">
              Szukaj po emailu, otworz edytor i zarzadzaj dostepem/planem/datami.
            </p>
            <div class="metaRow" style="flex-wrap: wrap; gap: 10px">
              <button class="btn-white-outline" id="btnLoadUsers" type="button">
                Wczytaj uzytkownikow
              </button>
              <select class="select" id="roleFilter" style="min-width: 200px">
                <option value="all">Wszyscy</option>
                <option value="admins">Tylko admin</option>
                <option value="premium">Z dostepem</option>
                <option value="free">Bez dostepu</option>
                <option value="blocked">Zablokowani</option>
              </select>
              <select class="select" id="planFilter" style="min-width: 200px">
                <option value="all">Plan: wszystkie</option>
                <option value="free">Plan: free</option>
                <option value="a1">Plan: A1</option>
                <option value="a2">Plan: A2</option>
                <option value="b1">Plan: B1</option>
                <option value="b2">Plan: B2</option>
                <option value="premium">Plan: premium</option>
                <option value="premium_a1">Plan: premium_a1</option>
                <option value="premium_b1">Plan: premium_b1</option>
                <option value="premium_b2">Plan: premium_b2</option>
                <option value="vip">Plan: VIP</option>
              </select>
              <select class="select" id="userSort" style="min-width: 210px">
                <option value="createdAt_desc">Sortuj: najnowsi</option>
                <option value="createdAt_asc">Sortuj: najstarsi</option>
                <option value="email_asc">Sortuj: email A-Z</option>
                <option value="email_desc">Sortuj: email Z-A</option>
                <option value="lastLogin_desc">Sortuj: ostatnie logowanie</option>
                <option value="accessUntil_desc">Sortuj: dostep wygasa</option>
                <option value="plan_asc">Sortuj: plan</option>
              </select>
              <input
                class="input"
                id="userSearch"
                placeholder="Szukaj po email..."
                style="min-width: 260px"
              />
              <button class="btn-white-outline" id="btnSearch" type="button">
                Szukaj
              </button>
              <button class="btn-white-outline" id="btnClear" type="button">
                Wyczysc
              </button>
              <span class="hintSmall" style="margin-left: auto"
                >Wskazowka: kliknij uzytkownika -> edytuj dostep</span
              >
            </div>
            <div id="usersSection" style="display: none; margin-top: 16px">
              <div class="list" id="usersList"></div>
              <button
                class="btn-white-outline"
                id="btnLoadMore"
                style="margin-top: 12px"
              >
                Wczytaj wiecej
              </button>
            </div>
          </div>
        </details>

        <!-- Postepy (analiza) -->
        <details class="card" id="accProgress">
          <summary
            class="sectionTitle"
            style="cursor: pointer; list-style: none"
          >
            Postepy (analiza)
            <span class="hintSmall" style="font-weight: 600; margin-left: 8px"
              >(kliknij aby otworzyc/zamknac)</span
            >
          </summary>
          <div style="margin-top: 10px">
            <p class="subtitle">
              Wybierz uzytkownika, aby zobaczyc trudne tematy i bledne odpowiedzi w tescie.
            </p>
            <div class="metaRow" style="flex-wrap: wrap; gap: 10px">
              <button class="btn-white-outline" id="btnLoadProgress" type="button">
                Wczytaj postepy
              </button>
              <select class="select" id="progressUserSelect" style="min-width: 260px">
                <option value="">Wybierz uzytkownika</option>
              </select>
              <select class="select" id="progressSort" style="min-width: 220px">
                <option value="lastActivity_desc">Sortuj: ostatnia aktywnosc</option>
                <option value="practice_asc">Sortuj: najnizsza praktyka</option>
                <option value="test_asc">Sortuj: najnizszy test</option>
                <option value="topic_asc">Sortuj: temat A-Z</option>
              </select>
              <select class="select" id="progressFilter" style="min-width: 200px">
                <option value="all">Wszystkie</option>
                <option value="hard">Tylko trudne (&lt; 80%)</option>
                <option value="not_done">Nieukonczone</option>
              </select>
              <input
                class="input"
                id="progressSearch"
                placeholder="Szukaj po temacie..."
                style="min-width: 240px"
              />
            </div>
            <div id="progressSection" style="display: none; margin-top: 16px">
              <div class="list" id="progressList"></div>
            </div>
          </div>
        </details>

        <!-- Fiszki (statystyki) -->
        <details class="card" id="accFlashcards">
          <summary
            class="sectionTitle"
            style="cursor: pointer; list-style: none"
          >
            Fiszki (statystyki)
            <span class="hintSmall" style="font-weight: 600; margin-left: 8px"
              >(kliknij aby otworzyc/zamknac)</span
            >
          </summary>
          <div style="margin-top: 10px">
            <div class="metaRow" style="flex-wrap: wrap; gap: 10px">
              <button class="btn-white-outline" id="btnLoadFlashcards" type="button">
                Wczytaj fiszki
              </button>
              <select class="select" id="flashcardsLevel" style="min-width: 180px">
                <option value="all">Wszystkie poziomy</option>
                <option value="A1">A1</option>
                <option value="A2">A2</option>
                <option value="B1">B1</option>
                <option value="B2">B2</option>
              </select>
              <input
                id="flashcardsSearch"
                class="input"
                placeholder="Szukaj tematu..."
                style="min-width: 220px"
              />
            </div>
            <div class="hintSmall" id="flashcardsSummary" style="margin-top: 10px"></div>
            <div id="flashcardsList" class="muted" style="margin-top: 10px"></div>
          </div>
        </details>

        <!-- Opinie i oceny -->
        <details class="card" id="accReviews">
          <summary
            class="sectionTitle"
            style="cursor: pointer; list-style: none"
          >
            Opinie i oceny
            <span class="hintSmall" style="font-weight: 600; margin-left: 8px"
              >(kliknij aby otworzyc/zamknac)</span
            >
          </summary>
          <div style="margin-top: 10px">
            <p class="subtitle">
              Lista opinii uzytkownikow o lekcjach/tematach/kursach.
            </p>
            <div class="metaRow" style="flex-wrap: wrap; gap: 10px">
              <button class="btn-white-outline" id="btnLoadReviews" type="button">
                Wczytaj opinie
              </button>
              <select class="select" id="reviewType" style="min-width: 200px">
                <option value="all">Wszystkie typy</option>
                <option value="topic">Temat / lekcja</option>
                <option value="course">Kurs (poziom)</option>
              </select>
              <select class="select" id="reviewRating" style="min-width: 200px">
                <option value="all">Wszystkie oceny</option>
                <option value="5">5</option>
                <option value="4">4</option>
                <option value="3">3</option>
                <option value="2">2</option>
                <option value="1">1</option>
              </select>
              <select class="select" id="reviewLevel" style="min-width: 180px">
                <option value="all">Poziom: wszystkie</option>
                <option value="A1">A1</option>
                <option value="A2">A2</option>
                <option value="B1">B1</option>
                <option value="B2">B2</option>
              </select>
              <input
                class="input"
                id="reviewSearch"
                placeholder="Szukaj (email/temat)..."
                style="min-width: 260px"
              />
            </div>
            <div id="reviewsSection" style="display: none; margin-top: 16px">
              <div class="list" id="reviewsList"></div>
            </div>
          </div>
        </details>

        <!-- Logi aplikacji -->
        <details class="card" id="accAppLogs">
          <summary
            class="sectionTitle"
            style="cursor: pointer; list-style: none"
          >
            Logi aplikacji
            <span class="hintSmall" style="font-weight: 600; margin-left: 8px"
              >(kliknij aby otworzyc/zamknac)</span
            >
          </summary>
          <div style="margin-top: 10px">
            <p class="subtitle">
              Najnowsze bledy i odrzucenia (client-side). Filtry dzialaja po wczytaniu.
            </p>
            <div class="metaRow" style="flex-wrap: wrap; gap: 10px">
              <button class="btn-white-outline" id="btnLoadAppLogs" type="button">
                Wczytaj logi
              </button>
              <select class="select" id="logType" style="min-width: 200px">
                <option value="all">Wszystkie typy</option>
                <option value="error">error</option>
                <option value="rejection">rejection</option>
                <option value="resource">resource</option>
              </select>
              <input
                class="input"
                id="logPage"
                placeholder="Filtr strony (np. lessonpage)"
                style="min-width: 220px"
              />
              <input
                class="input"
                id="logSearch"
                placeholder="Szukaj (message/email)..."
                style="min-width: 220px"
              />
              <select class="select" id="logLimit" style="min-width: 140px">
                <option value="50">50</option>
                <option value="100">100</option>
                <option value="200">200</option>
              </select>
              <span class="hintSmall" id="logStatus"></span>
            </div>
            <div id="appLogsSection" style="display: none; margin-top: 16px">
              <div class="list" id="appLogsList"></div>
            </div>
          </div>
        </details>

        <!-- Biblioteka audio -->
        <details class="card" id="accAudioLib">
          <summary
            class="sectionTitle"
            style="cursor: pointer; list-style: none"
          >
            Biblioteka audio
            <span class="hintSmall" style="font-weight: 600; margin-left: 8px"
              >(kliknij aby otworzyc/zamknac)</span
            >
          </summary>
          <div style="margin-top: 10px">
            <div class="metaRow" style="flex-wrap: wrap; gap: 10px; align-items: center">
              <input id="audioLibFile" type="file" accept="audio/*" />
              <input id="audioLibLabel" class="input" placeholder="Nazwa/etykieta" style="min-width: 200px" />
              <select id="audioLibLevel" class="select" style="min-width: 160px">
                <option value="">Poziom (opcjonalnie)</option>
                <option value="A1">A1</option>
                <option value="A2">A2</option>
                <option value="B1">B1</option>
                <option value="B2">B2</option>
              </select>
              <input id="audioLibTopic" class="input" placeholder="ID tematu (opcjonalnie)" style="min-width: 200px" />
              <button class="btn btn-yellow" id="btnUploadAudioLib" type="button">
                Wgraj
              </button>
              <button class="btn" id="btnLoadAudioLib" type="button">
                Wczytaj
              </button>
            </div>
            <div class="hintSmall" id="audioLibStatus" style="margin-top: 8px"></div>
            <div id="audioLibList" class="muted" style="margin-top: 10px"></div>
          </div>
        </details>
      </div>
    </main>
    <!-- Modal: Edit user access -->
    <div
      aria-hidden="true"
      class="modalOverlay"
      id="userModal"
      style="display: none"
    >
      <div class="modalCard">
        <div class="modalHead">
          <div class="modalTitle">Edytuj uzytkownika</div>
          <button class="btn-white-outline" id="userModalClose" type="button">
            X
          </button>
        </div>
        <div class="hr"></div>
        <div class="panelGrid">
          <div class="card">
            <div class="sectionTitle" style="margin-top: 0">Dane</div>
            <div class="muted" style="font-weight: 900; margin-top: 8px">
              Email
            </div>
            <div id="um_email" style="width: fit-content">-</div>
            <div class="muted" style="font-weight: 900; margin-top: 12px">
              UID
            </div>
            <div class="hintSmall" id="um_uid">-</div>
            <div class="muted" style="font-weight: 900; margin-top: 12px">
              Plec
            </div>
            <select class="select" id="um_gender">
              <option value="">-</option>
              <option value="papi">Papi</option>
              <option value="mami">Mami</option>
            </select>
            <div
              class="metaRow"
              style="margin-top: 14px; flex-wrap: wrap; gap: 10px"
            >
              <label style="gap: 10px">
                <input
                  id="um_admin"
                  style="width: 18px; height: 18px; margin: 0"
                  type="checkbox"
                />
                Admin
              </label>
              <label style="gap: 10px">
                <input
                  id="um_access"
                  style="width: 18px; height: 18px; margin: 0"
                  type="checkbox"
                />
                Dostep
              </label>
              <label style="gap: 10px">
                <input
                  id="um_blocked"
                  style="width: 18px; height: 18px; margin: 0"
                  type="checkbox"
                />
                Zablokowany
              </label>
            </div>
            <div
              class="metaRow"
              style="margin-top: 12px; flex-wrap: wrap; gap: 10px"
            >
              <button
                class="btn-white-outline"
                id="um_openPanelAs"
                type="button"
              >
                Podglad panelu jako uzytkownik
              </button>
              <span class="hintSmall">Tylko podglad (nie zmienia twojego logowania).</span>
            </div>
          </div>
          <div class="card">
            <div class="sectionTitle" style="margin-top: 0">Plan i data</div>
            <div class="muted" style="font-weight: 900; margin-top: 8px">
              Plan
            </div>
            <select class="select" id="um_plan">
              <option value="free">free (bez dostepu)</option>
              <option value="a1">A1</option>
              <option value="a2">A2</option>
              <option value="b1">B1</option>
              <option value="b2">B2</option>
              <option value="VIP A1 + A2 + B1">VIP A1 + A2 + B1</option>
              <option value="VIP A1 + A2 + B1 + B2">VIP A1 + A2 + B1 + B2</option>
              <option value="premium_a1">Premium A1 (A1+A2)</option>
              <option value="premium_b1">Premium B1 (B1+A1)</option>
              <option value="premium_b2">Premium B2 (B2+A1)</option>
              <option value="premium_B2">premium_B2</option>
            </select>
            <div class="muted" style="font-weight: 900; margin-top: 12px">
              Dostep do
            </div>
            <input class="input" id="um_until" type="datetime-local" />
            <div class="hintSmall" style="margin-top: 10px">
              Zasady: Dostep = admin OR access=true OR plan=premium OR accessUntil w przyszlosci.
            </div>
          </div>
          <div class="card">
            <div class="sectionTitle" style="margin-top: 0">Trial</div>
            <div class="muted" style="font-weight: 900; margin-top: 8px">
              Poziom
            </div>
            <select class="select" id="um_trial_level">
              <option value="A1">A1</option>
              <option value="A2">A2</option>
              <option value="B1">B1</option>
              <option value="B2">B2</option>
            </select>
            <div class="muted" style="font-weight: 900; margin-top: 12px">
              Dni
            </div>
            <input class="input" id="um_trial_days" type="number" min="1" step="1" value="7" />
            <div class="metaRow" style="margin-top: 12px; flex-wrap: wrap; gap: 10px">
              <button class="btn-yellow" id="um_trial_grant" type="button">
                Daj trial teraz
              </button>
              <button class="btn-white-outline" id="um_trial_allow" type="button">
                Pozwol na nowy trial
              </button>
            </div>
            <div class="hintSmall" id="um_trial_info" style="margin-top: 10px"></div>
          </div>
        </div>
        <div class="hr"></div>
        <div class="metaRow" style="flex-wrap: wrap; gap: 10px">
          <button class="btn-yellow" id="um_grant30" type="button">
            Premium +30 dni
          </button>
          <button class="btn-white-outline" id="um_extend30" type="button">
            Przedluz +30 dni
          </button>
          <button class="btn-red" id="um_revoke" type="button">
            Usun dostep
          </button>
          <span
            class="hintSmall"
            id="um_status"
            style="margin-left: auto"
          ></span>
        </div>
        <div
          class="metaRow"
          style="margin-top: 12px; justify-content: flex-end; gap: 10px"
        >
          <button class="btn-yellow" id="um_save" type="button">
            Zapisz zmiany
          </button>
          <button class="btn-white-outline" id="um_cancel" type="button">
            Anuluj
          </button>
        </div>
        <div class="hr"></div>
        <div class="sectionTitle" style="margin-top: 0">Notatka admina</div>
        <textarea
          class="input"
          id="um_note"
          placeholder="Notatka wewnetrzna (tylko admin)..."
          rows="3"
        ></textarea>
        <div class="hr"></div>
        <div class="sectionTitle" style="margin-top: 0">
          Historia dostepu
        </div>
        <div class="list" id="um_logs"></div>
        <div class="hintSmall" style="margin-top: 10px">
          Zapisuje sie automatycznie gdy zmieniasz dostep/plan/daty lub uzywasz
          szybkich przyciskow.
        </div>
      </div>
    </div>
    <script src="assets/js/firebase-init.js" type="module"></script>
    <script src="assets/js/pages/esadmin-page.js" type="module"></script>
  </body>
</html>







