<!doctype html>
<html lang="pl">
  <head>
    <meta charset="utf-8" />
    <title>Kreator lekcji | Admin | AquiVivo</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700;800;900&family=Playfair+Display:wght@700;900&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="assets/css/styles.css?v=20260214d" />
    <script src="assets/js/layout.js?v=20260214d" type="module"></script>
  </head>
  <body data-page="admin-wizard">
    <div id="appHeader"></div>
    <main class="page">
      <div class="container wizardLayout">
        <div class="wizardMain">
        <section class="heroBanner">
          <div class="heroTitleRow">
            <div class="heroIcon">AV</div>
            <div>
              <h1 class="sectionTitle" style="margin: 0">Kreator lekcji i cwiczen</h1>
              <p class="subtitle" style="margin-top: 6px">
                Szybkie tworzenie lub edycja istniejacego tematu.
              </p>
            </div>
          </div>
          <div class="metaRow" style="margin-top: 10px; gap: 10px; flex-wrap: wrap">
            <a class="btn-white-outline" href="admin-select.html">Centrum admina</a>
            <a class="btn-white-outline" href="import/a1-official-first-two.html" target="_blank" rel="noopener noreferrer">
              Seed A1 (2 tematy)
            </a>
            <a class="btn-white-outline" href="import/a1-starter-four-topics.html" target="_blank" rel="noopener noreferrer">
              Starter A1 (4 tematy)
            </a>
            <a class="btn-white-outline" href="import/a1-vocab-xlsx.html" target="_blank" rel="noopener noreferrer">
              Import A1 vocab (.xlsx)
            </a>
            <a class="btn-white-outline" href="import/sample-a2-lessons.html" target="_blank" rel="noopener noreferrer">
              Demo A2 (2 lekcje)
            </a>
            <button class="btn-white-outline" id="btnGoExerciseAdminHeader" type="button">
              Dodaj cwiczenie
            </button>
            <span id="wizSingleStatusTop" class="hintSmall"></span>
          </div>
        </section>

        <section class="card">
          <div class="sectionTitle" style="margin-top: 0">Tryb</div>
          <div class="metaRow" style="gap: 12px; flex-wrap: wrap; align-items: center">
            <label style="display: flex; gap: 8px; align-items: center">
              <input type="radio" name="mode" id="modeNew" checked />
              Nowy temat
            </label>
            <label style="display: flex; gap: 8px; align-items: center">
              <input type="radio" name="mode" id="modeEdit" />
              Edytuj istniejacy
            </label>
            <span id="modeStatus" class="hintSmall"></span>
          </div>
        </section>

        <section class="card" id="stepNav">
          <div class="metaRow" style="gap: 10px; flex-wrap: wrap">
            <button class="btn-white-outline" data-step="1">1. Kurs</button>
            <button class="btn-white-outline" data-step="2">2. Lekcja</button>
            <button class="btn-white-outline" data-step="3">3. Cwiczenia</button>
            <button class="btn-white-outline" data-step="4">4. Podsumowanie</button>
          </div>
        </section>

        <!-- STEP 1 -->
        <section class="card wizardStep" id="step1">
          <div class="sectionTitle" style="margin-top: 0">Krok 1 - Kurs / temat</div>

          <div id="editPicker" style="display: none; margin-top: 10px">
            <div class="metaRow" style="gap: 10px; flex-wrap: wrap; align-items: flex-end">
              <div>
                <label class="muted" style="font-weight: 900; display: block; margin-bottom: 6px">Poziom</label>
                <select id="editLevel" class="select" style="min-width: 140px">
                  <option value="A1">A1</option>
                  <option value="A2">A2</option>
                  <option value="B1">B1</option>
                  <option value="B2">B2</option>
                </select>
              </div>
              <div style="min-width: 360px; flex: 1">
                <label class="muted" style="font-weight: 900; display: block; margin-bottom: 6px">Temat</label>
                <select id="editTopic" class="select" disabled>
                  <option value="">-- Wczytaj tematy --</option>
                </select>
              </div>
              <button class="btn-white-outline" id="btnLoadEditTopics" type="button">Wczytaj</button>
            </div>
          </div>

          <div class="adminGrid wizardBasic" style="margin-top: 12px">
            <div>
              <label>Poziom</label>
              <select id="courseLevel" class="select">
                <option value="A1">A1</option>
                <option value="A2">A2</option>
                <option value="B1">B1</option>
                <option value="B2">B2</option>
              </select>
            </div>
            <div>
              <label>Tytul</label>
              <input id="courseTitle" placeholder="Np. Miasto i miejsca" />
            </div>
            <div style="grid-column: 1 / -1">
              <label>Opis</label>
              <input id="courseDesc" placeholder="Krotki opis tematu..." />
            </div>
          </div>
          <details class="wizDetails" style="margin-top: 10px">
            <summary>Opcje dodatkowe</summary>
            <div class="adminGrid wizardAdvanced" style="margin-top: 10px">
              <div>
                <label>Slug</label>
                <input id="courseSlug" placeholder="miasto-i-miejsca" />
              </div>
              <div>
                <label>Ikonka (emoji)</label>
                <input id="courseIcon" placeholder="np. ðŸ™ï¸" maxlength="16" />
              </div>
              <div>
                <label>Typ</label>
                <select id="courseType" class="select">
                  <option value="grammar">Gramatyka</option>
                  <option value="vocab">Slownictwo</option>
                  <option value="both">Gramatyka + slownictwo</option>
                </select>
              </div>
              <div>
                <label>Sciezka / track (opcjonalnie)</label>
                <input id="courseTrack" placeholder="np. latam" />
              </div>
              <div>
                <label>Kolejnosc (opcjonalnie)</label>
                <input id="courseOrder" type="number" min="1" placeholder="auto" />
              </div>
              <div style="grid-column: 1 / -1">
                <label>Obrazek (URL) (opcjonalnie)</label>
                <input id="courseImageUrl" placeholder="https://... (najlepiej kwadrat 256Ã—256)" />
              </div>
            </div>
            <div class="hintSmall" style="margin-top: 6px">
              Slug i kolejnosc moga pozostac puste - system ustawi je automatycznie.
            </div>
          </details>
          <div class="metaRow" style="margin-top: 12px; gap: 10px; flex-wrap: wrap">
            <button class="btn-yellow" id="btnSaveCourse" type="button">Zapisz i dalej</button>
            <span id="courseStatus" class="hintSmall"></span>
          </div>
          <details class="wizDetails" style="margin-top: 12px">
            <summary>Kopiuj temat (lekcja + cwiczenia)</summary>
            <div class="metaRow" style="flex-wrap:wrap; gap:10px; align-items:flex-end; margin-top:10px;">
              <div>
                <label class="muted" style="font-weight:900; display:block; margin-bottom:6px;">Poziom zrodlowy</label>
                <select id="wizCopyFromLevel" class="select" style="min-width:160px;">
                  <option value="A1">A1</option>
                  <option value="A2">A2</option>
                  <option value="B1">B1</option>
                  <option value="B2">B2</option>
                </select>
              </div>
              <div style="min-width: 320px; flex: 1">
                <label class="muted" style="font-weight:900; display:block; margin-bottom:6px;">Temat zrodlowy</label>
                <select id="wizCopyFromTopic" class="select" disabled>
                  <option value="">-- Wczytaj tematy --</option>
                </select>
              </div>
              <button id="btnWizLoadCopyTopics" class="btn-white-outline" type="button">Wczytaj tematy</button>
            </div>
            <div class="metaRow" style="flex-wrap:wrap; gap:10px; margin-top:12px; align-items:flex-end;">
              <div>
                <label class="muted" style="font-weight:900; display:block; margin-bottom:6px;">Poziom docelowy</label>
                <select id="wizCopyToLevel" class="select" style="min-width:160px;">
                  <option value="A1">A1</option>
                  <option value="A2">A2</option>
                  <option value="B1">B1</option>
                  <option value="B2">B2</option>
                </select>
              </div>
              <div style="flex:1; min-width:220px;">
                <label class="muted" style="font-weight:900; display:block; margin-bottom:6px;">Nowy tytul (opcjonalnie)</label>
                <input id="wizCopyNewTitle" class="input" placeholder="Np. Miasto i miejsca (kopia)" />
              </div>
              <div style="min-width:220px;">
                <label class="muted" style="font-weight:900; display:block; margin-bottom:6px;">Nowy slug (opcjonalnie)</label>
                <input id="wizCopyNewSlug" class="input" placeholder="np. miasto-i-miejsca" />
              </div>
              <button id="btnWizCopyTopic" class="btn-yellow" type="button">Kopiuj temat</button>
              <span id="wizCopyStatus" class="hintSmall"></span>
            </div>
            <div class="hintSmall" style="margin-top:10px;">
              Kopiuje: kurs (courses), lekcje (course_meta) oraz wszystkie cwiczenia (exercises).
            </div>
          </details>
        </section>

        <!-- STEP 2 -->
        <section class="card wizardStep" id="step2" style="display: none">
          <div class="sectionTitle" style="margin-top: 0">Krok 2 - Lekcja</div>
          <div class="metaRow" style="gap: 10px; flex-wrap: wrap; align-items: center">
            <label style="display: flex; gap: 8px; align-items: center">
              <input id="lessonPublish" type="checkbox" />
              Opublikuj
            </label>
            <input id="lessonDuration" class="input" type="number" min="0" placeholder="Czas (min)" style="max-width: 140px" />
            <button class="btn-white-outline" id="btnGoExerciseAdminStep2" type="button">
              Dodaj cwiczenie
            </button>
            <span id="wizSingleStatusStep2" class="hintSmall"></span>
          </div>

          <div class="hr"></div>

          <div class="muted" style="font-weight: 800">Konstruktor blokowy</div>
          <div class="metaRow" style="gap: 10px; flex-wrap: wrap; margin-top: 8px">
            <button class="btn-white-outline" id="btnWizTplGrammar" type="button">Szablon: Gramatyka</button>
            <button class="btn-white-outline" id="btnWizTplVocab" type="button">Szablon: Slownictwo</button>
            <button class="btn-white-outline" id="btnWizTplPremium" type="button">Premium</button>
            <button class="btn-white-outline" id="btnWizTplRepaso" type="button">Powtorka/Test</button>
            <button class="btn-white-outline" id="btnWizClearBlocks" type="button">Wyczysc bloki</button>
          </div>

          <div class="metaRow" style="gap: 10px; flex-wrap: wrap; margin-top: 8px">
            <button class="btn-white-outline" id="btnWizAddHeading" type="button">+ Tytul</button>
            <button class="btn-white-outline" id="btnWizAddText" type="button">+ Tekst</button>
            <button class="btn-white-outline" id="btnWizAddImage" type="button">+ Obraz</button>
            <button class="btn-white-outline" id="btnWizAddTip" type="button">+ Wskazowka</button>
            <button class="btn-white-outline" id="btnWizAddExample" type="button">+ Przyklad</button>
            <button class="btn-white-outline" id="btnWizAddDivider" type="button">+ Separator</button>
          </div>

          <div id="wizBlocksList" style="margin-top: 10px"></div>

          <details class="wizDetails" style="margin-top: 10px">
            <summary>Import z konspektu / HTML</summary>
            <div style="margin-top: 10px">
              <div class="muted" style="font-weight: 800">Outline / Markdown</div>
              <textarea
                id="lessonOutline"
                rows="8"
                placeholder="TITLE: Miasto i miejsca\nDESC: Slownictwo z miasta\nTIME: 15\n\n## Cel lekcji\nNauczysz sie...\n\nTIP: Wskazowka | Zawsze...\nEX: Przyklad | Jestem w centrum.\nIMG: https://..."
              ></textarea>
              <div class="metaRow" style="gap: 10px; flex-wrap: wrap; margin-top: 8px">
                <button class="btn-yellow" id="btnWizOutlineReplace" type="button">Zamien na bloki</button>
                <button class="btn-white-outline" id="btnWizOutlineAppend" type="button">Dodaj na koniec</button>
                <span id="wizOutlineStatus" class="hintSmall"></span>
              </div>
            </div>

            <div style="margin-top: 10px">
              <div class="muted" style="font-weight: 800">HTML (opcjonalnie)</div>
              <textarea id="lessonHtml" rows="6" placeholder="<h2>...</h2>"></textarea>
            </div>
          </details>

          <div class="metaRow" style="margin-top: 12px; gap: 10px; flex-wrap: wrap">
            <button class="btn-yellow" id="btnSaveLesson" type="button">Zapisz lekcje</button>
            <button class="btn-red" id="btnPublishLesson" type="button">Opublikuj teraz</button>
            <button class="btn-white-outline" id="btnSkipLesson" type="button">Pomin</button>
            <span id="lessonStatus" class="hintSmall"></span>
          </div>
          <div class="hintSmall" style="margin-top: 6px">
            Lekcja jest publikowana tylko gdy zaznaczysz "Opublikuj" lub klikniesz "Opublikuj teraz".
          </div>
        </section>

        <!-- STEP 3 -->
        <section class="card wizardStep" id="step3" style="display: none">
          <div class="sectionTitle" style="margin-top: 0">Krok 3 - Cwiczenia</div>
          <div class="metaRow" style="gap: 10px; flex-wrap: wrap; margin-top: 6px">
            <button class="btn-white-outline" id="btnGoExerciseAdmin" type="button">
              Dodaj pojedyncze cwiczenie
            </button>
            <span id="wizSingleStatus" class="hintSmall"></span>
          </div>

          <div class="muted" style="font-weight: 800">Szybki import (CSV/TSV)</div>
          <textarea
            id="wizBulkArea"
            rows="6"
            placeholder="type\tprompt\tanswer\toptions\tcategory\ttags\tnotes\timageUrl\torder"
          ></textarea>
          <div class="smallNote" style="margin-top: 8px">
            Naglowek jest opcjonalny. Jesli go nie ma, uzywamy: prompt, answer, options, category, tags, notes, imageUrl, order.
          </div>
          <div class="metaRow" style="gap: 10px; flex-wrap: wrap; margin-top: 8px">
            <button class="btn-white-outline" id="btnWizParse" type="button">Importuj</button>
            <button class="btn-white-outline" id="btnBulkClear" type="button">Wyczysc</button>
            <span id="wizBulkStatus" class="hintSmall"></span>
          </div>

          <details class="wizDetails" style="margin-top: 10px">
            <summary>Zaawansowane: mapowanie kolumn + pliki</summary>
            <div class="smallNote" style="margin-top: 8px; font-weight: 800">Mapowanie kolumn (opcjonalnie)</div>
            <label style="display:flex; align-items:center; gap:8px; margin-top:6px;">
              <input id="bulkMapUse" type="checkbox" />
              Uzyj mapowania (kolumny liczone od 1)
            </label>
            <div class="metaRow" style="gap: 10px; flex-wrap: wrap; margin-top: 8px">
              <select id="bulkMapType" class="select" style="min-width: 160px"></select>
              <select id="bulkMapPrompt" class="select" style="min-width: 160px"></select>
              <select id="bulkMapAnswer" class="select" style="min-width: 160px"></select>
              <select id="bulkMapOptions" class="select" style="min-width: 160px"></select>
              <select id="bulkMapCategory" class="select" style="min-width: 160px"></select>
            </div>
            <div class="metaRow" style="gap: 10px; flex-wrap: wrap; margin-top: 6px">
              <select id="bulkMapTags" class="select" style="min-width: 160px"></select>
              <select id="bulkMapNotes" class="select" style="min-width: 160px"></select>
              <select id="bulkMapImage" class="select" style="min-width: 160px"></select>
              <select id="bulkMapOrder" class="select" style="min-width: 160px"></select>
            </div>
            <div class="smallNote" style="margin-top: 8px">Drag & drop:</div>
            <div id="bulkMapChips" class="metaRow" style="gap:8px; flex-wrap:wrap; margin-top:6px;"></div>
            <div class="metaRow" style="gap:8px; flex-wrap:wrap; margin-top:6px;">
              <div class="mapTarget" data-map="type">type: <span id="mapValType">-</span></div>
              <div class="mapTarget" data-map="prompt">prompt: <span id="mapValPrompt">-</span></div>
              <div class="mapTarget" data-map="answer">answer: <span id="mapValAnswer">-</span></div>
              <div class="mapTarget" data-map="options">options: <span id="mapValOptions">-</span></div>
              <div class="mapTarget" data-map="category">category: <span id="mapValCategory">-</span></div>
              <div class="mapTarget" data-map="tags">tags: <span id="mapValTags">-</span></div>
              <div class="mapTarget" data-map="notes">notes: <span id="mapValNotes">-</span></div>
              <div class="mapTarget" data-map="imageUrl">image: <span id="mapValImage">-</span></div>
              <div class="mapTarget" data-map="order">order: <span id="mapValOrder">-</span></div>
            </div>
            <div class="metaRow" style="gap: 10px; flex-wrap: wrap; margin-top: 8px">
              <input id="bulkImportFile" type="file" accept=".csv,.tsv,text/csv,text/tab-separated-values" />
              <button class="btn-white-outline" id="btnLoadBulkFile" type="button">Wczytaj plik</button>
            </div>
          </details>

          <div class="hr"></div>

          <details class="wizDetails">
            <summary>Fiszki (Quizlet)</summary>
            <textarea id="wizFlashArea" rows="4" placeholder="PL<TAB>ES<TAB>EX: ..."></textarea>
            <div class="metaRow" style="gap: 10px; flex-wrap: wrap; margin-top: 8px">
              <button class="btn-white-outline" id="btnWizFlash" type="button">Dodaj fiszki</button>
              <span id="wizFlashStatus" class="hintSmall"></span>
            </div>
          </details>

          <div class="hr"></div>

          <div class="muted" style="font-weight: 800">Biblioteka zestawow</div>
          <div class="metaRow" style="gap: 10px; flex-wrap: wrap; margin-top: 8px">
            <select id="wizLibLevel" class="select" style="min-width: 120px">
              <option value="A1">A1</option>
              <option value="A2">A2</option>
              <option value="B1">B1</option>
              <option value="B2">B2</option>
            </select>
            <select id="wizLibSet" class="select" style="min-width: 320px"></select>
            <button class="btn-white-outline" id="btnWizLib" type="button">Dodaj zestaw</button>
            <span id="wizLibStatus" class="hintSmall"></span>
          </div>
          <label style="display:flex; align-items:center; gap:8px; margin-top:8px;">
            <input id="wizLibEmptyOnly" type="checkbox" checked />
            Tylko tematy bez cwiczen
          </label>
          <div class="metaRow" style="gap: 10px; flex-wrap: wrap; margin-top: 8px">
            <button class="btn-white-outline" id="btnWizLibAll" type="button">
              Dodaj zestaw do wszystkich tematow poziomu
            </button>
            <span id="wizLibAllStatus" class="hintSmall"></span>
          </div>
          <div id="wizLibPreview" class="card" style="margin-top: 10px; padding: 12px"></div>

          <div class="metaRow" style="margin-top: 12px; gap: 10px; flex-wrap: wrap">
            <button class="btn-yellow" id="btnStep3Next" type="button">Dalej</button>
          </div>
        </section>

        <!-- STEP 4 -->
        <section class="card wizardStep" id="step4" style="display: none">
          <div class="sectionTitle" style="margin-top: 0">Krok 4 - Podsumowanie</div>
          <div id="summaryBox" class="muted" style="line-height: 1.6"></div>
          <div class="metaRow" style="margin-top: 12px; gap: 10px; flex-wrap: wrap">
            <a id="summaryLesson" class="btn-yellow" href="#">Admin lekcji</a>
            <a id="summaryExercises" class="btn-white-outline" href="#">Admin cwiczen</a>
            <a class="btn-white-outline" href="admin-select.html">Centrum admina</a>
          </div>
        </section>
        </div>
        <aside class="wizardSide">
          <section class="card wizardSideCard">
            <div class="sectionTitle" style="margin-top: 0">Szybkie akcje</div>
            <div class="metaRow" style="gap: 10px; flex-wrap: wrap">
              <button class="btn-yellow" id="btnSaveAll" type="button">Zapisz wszystko</button>
              <button class="btn-white-outline" id="btnOpenLessonAdmin" type="button">Admin lekcji</button>
              <button class="btn-white-outline" id="btnOpenExerciseAdmin" type="button">Admin cwiczen</button>
            </div>
            <span id="saveAllStatus" class="hintSmall"></span>
            <div class="hr"></div>
            <div class="sectionTitle" style="margin-top: 0">Podsumowanie</div>
            <div id="summarySidebar" class="muted" style="line-height: 1.6"></div>
            <div class="hr"></div>
            <div class="smallNote">
              Wskazowka: mozesz zapisac kurs i lekcje jednym przyciskiem, a cwiczenia dodawac pozniej.
            </div>
          </section>
        </aside>
      </div>
    </main>

    <script type="module" src="assets/js/pages/admin-wizard-page.js"></script>
  </body>
</html>




