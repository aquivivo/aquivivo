<!doctype html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <title>Ejercicios | AquiVivo</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700;800;900&family=Playfair+Display:wght@700;800;900&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="assets/css/styles.css?v=20260214z" />
    <script src="assets/js/layout.js?v=20260214z" type="module"></script>
  </head>

  <body data-page="ejercicio">
    <div id="appHeader"></div>

    <main class="page">
      <div class="container">
        <section id="exerciseHero" class="heroBanner" style="padding: 22px 18px">
          <div class="heroTitleRow">
            <div class="heroIcon">&#x1F9E9;</div>
            <div style="flex: 1">
              <h1
                class="glow-text"
                style="
                  margin: 0;
                  font-family: 'Playfair Display', serif;
                  font-weight: 900;
                "
              >
                Ejercicios
              </h1>
              <p class="subtitle" id="topicDesc" style="margin: 8px 0 0">
                Cargando...
              </p>

              <div class="metaRow" style="margin-top: 10px">
                <span id="pillLevel">Nivel: -</span>
                <span id="pillType" style="display: none"></span>
                <span id="pillSlug" style="display: none"></span>
                <span id="pillCount">Ejercicios: 0</span>
                <span id="pillProgress">Practica: 0%</span>
                <span id="pillTestScore">Test: 0%</span>
                <a id="pillLessonLink" href="#" style="text-decoration: none"
                  >Leccion</a
                >
              </div>

              <div class="readTools" id="readTools" style="margin-top: 12px">
                <div class="readProgress">
                  <div class="readProgressBar">
                    <div
                      class="readProgressFill"
                      id="readProgressFill"
                      style="width: 0%"
                    ></div>
                  </div>
                  <div class="readProgressText" id="readProgressText">
                    Ejercicios: 0%
                  </div>
                  <div class="readProgressText" id="testProgressText">
                    Test: 0%
                  </div>
                </div>
                <div class="exerciseLinks" id="exerciseLinksWrap">
                <a class="btn-white-outline" id="btnBackLesson" href="#"
                  >Volver a la leccion</a
                >
                <a class="btn-white-outline" id="btnReview" href="review.html"
                  >Repasar</a
                >
                <a class="btn-white-outline" id="btnFlashcards" href="flashcards.html"
                  >Fichas</a
                >
                <a class="btn-white-outline" id="btnBackCourse" href="#"
                  >Temas</a
                >
                </div>
              </div>
            </div>
          </div>
        </section>

        <section id="exerciseFiltersCard" class="card" style="margin-top: 14px; padding: 14px 16px">
          <div
            style="
              display: flex;
              gap: 12px;
              flex-wrap: wrap;
              align-items: center;
              justify-content: space-between;
            "
          >
            <div
              style="
                display: flex;
                gap: 10px;
                flex-wrap: wrap;
                align-items: center;
              "
            >
              <input
                id="searchInput"
                class="input"
                placeholder="Buscar..."
                style="min-width: 220px"
              />
              <select id="filterType" class="select">
                <option value="">Tipo: todos</option>
                <option value="choice">Choice</option>
                <option value="text">Text</option>
                <option value="match">Match</option>
                <option value="order">Order</option>
              </select>
              <select id="filterTag" class="select">
                <option value="">Tag: todos</option>
              </select>
              <button id="btnClearFilters" class="btn-white-outline">
                Limpiar
              </button>
            </div>

            <div
              style="
                display: flex;
                gap: 10px;
                flex-wrap: wrap;
                align-items: center;
              "
            >
              <span id="taskChips">-</span>
              <span
                ><span id="doneCount">0</span>/<span id="totalCount">0</span>
                practica</span
              >
            </div>
          </div>
        </section>

        <section id="adminWrap" style="display: none; margin-top: 12px">
          <!-- Admin UI injected by JS if needed -->
        </section>

        <section id="immersiveStage" class="immersiveStage" style="display: none">
          <div class="immersiveTrack" aria-hidden="true">
            <div id="immersiveTrackFill" class="immersiveTrackFill"></div>
          </div>
          <div class="immersiveTopLine">
            <span id="immersiveStep">1/1</span>
            <span id="immersiveType">Ejercicio</span>
          </div>
          <h2 id="immersivePromptTitle" class="immersivePromptTitle">
            Resuelve el ejercicio.
          </h2>
          <div id="immersiveExerciseHost" class="immersiveExerciseHost"></div>
          <div class="immersiveNav">
            <button class="btn-white-outline" id="btnImmHint" type="button" title="Pista" aria-label="Pista">
              ?
            </button>
            <button class="btn-white-outline" id="btnImmPrev" type="button">
              Anterior
            </button>
            <button class="btn-yellow" id="btnImmNext" type="button">
              Comprobar
            </button>
            <button class="btn-white-outline" id="btnImmDontKnow" type="button">
              No s&eacute;
            </button>
            <button class="btn-white-outline" id="btnResetCourse" type="button" style="display: none">
              Resetear curso
            </button>
          </div>
        </section>

        <section id="exerciseListSection" style="margin-top: 14px">
          <div id="emptyExercises" class="empty" style="display: none">
            No hay ejercicios todavia.
          </div>
          <div id="exerciseList" class="exerciseList"></div>
        </section>
      </div>
    </main>

    <div id="toast" class="toast" style="display: none"></div>

    <!-- Finish modal -->
    <div id="finishModal" class="modalOverlay" style="display: none">
      <div class="modalCard">
        <div
          style="
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 10px;
          "
        >
          <div style="font-weight: 900; font-size: 18px">Listo</div>
          <button class="toolBtn" id="btnCloseFinish" title="Cerrar">X</button>
        </div>
        <div class="muted" style="margin-top: 8px" id="finishText">
          Has completado los ejercicios.
        </div>
        <div
          style="margin-top: 14px; display: flex; gap: 10px; flex-wrap: wrap"
        >
          <a
            class="btn-yellow"
            id="btnFinishMiniTest"
            href="#"
            style="display: none"
            >Mini-test checkpoint</a
          >
          <a class="btn-yellow" id="btnFinishLesson" href="#"
            >Volver a la leccion</a
          >
          <button class="btn-white-outline" id="btnFinishCorrection" type="button">
            Pedir correcci&oacute;n
          </button>
          <a class="btn-white-outline" id="btnFinishCourse" href="#"
            >Ver temas</a
          >
          <a class="btn" id="btnFinishPanel" href="espanel.html">Libreta</a>
        </div>
      </div>
    </div>

    <!-- Community correction request modal (Busuu-like) -->
    <div id="correctionModal" class="modalOverlay" style="display: none">
      <div class="modalCard" style="max-width: 620px">
        <div class="modalHead">
          <div class="modalTitle">Comunidad &middot; Pide una correcci&oacute;n</div>
          <button class="btn-white-outline" id="btnCorrectionClose" type="button">
            X
          </button>
        </div>
        <div class="hr"></div>

        <div class="subtitle" id="correctionMeta">Nivel &middot; Tema</div>

        <div style="margin-top: 12px">
          <label class="mutedStrong" for="correctionText">Tu texto</label>
          <textarea
            id="correctionText"
            class="input"
            rows="6"
            placeholder="Escribe aqu&iacute; 2-4 frases para que otros puedan corregirte..."
          ></textarea>
          <div class="hintSmall" style="margin-top: 8px">
            Se publicar&aacute; en la comunidad para que otros estudiantes puedan ayudarte.
          </div>

          <div class="metaRow" style="margin-top: 12px; gap: 10px; flex-wrap: wrap">
            <button class="btn-white-outline" id="btnCorrectionRecord" type="button">
              Grabar voz
            </button>
            <button
              class="btn-white-outline"
              id="btnCorrectionClearAudio"
              type="button"
              style="display: none"
            >
              Quitar voz
            </button>
            <span class="hintSmall" id="correctionRecordHint"></span>
          </div>
          <audio
            id="correctionAudioPreview"
            controls
            style="display: none; width: 100%; margin-top: 10px"
          ></audio>
        </div>

        <div class="metaRow" style="margin-top: 12px; gap: 10px; flex-wrap: wrap">
          <button class="btn-yellow" id="btnCorrectionPublish" type="button">
            Publicar
          </button>
          <button class="btn-white-outline" id="btnCorrectionCancel" type="button">
            Cancelar
          </button>
          <span class="hintSmall" id="correctionMsg"></span>
        </div>
      </div>
    </div>

    <script type="module" src="assets/js/content-protect.js"></script>
    <script type="module" src="assets/js/pages/ejercicio-page.js?v=20260215e"></script>
  </body>
</html>


