<!doctype html>
<html lang="es">
  <head>
    <meta charset="utf-8" />
    <title>Perfil | AquiVivo</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700;900&family=Playfair+Display:wght@700;900&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="assets/css/styles.css" />
    <script src="assets/js/layout.js" type="module"></script>
  </head>

  <body data-page="profile" class="with-side-panel">
    <div id="appHeader"></div>
    <aside id="sidePanel" class="side-panel">
      <a href="index.html" data-page="inicio">🏠 Inicio</a>
      <a href="espanel.html#cursos" data-page="cursos">📚 Cursos</a>
      <a href="review.html" data-page="practicar">🔁 Practicar</a>
      <a href="recompensas.html" data-page="recompensas">🏆 Logros</a>
      <a href="mensajes.html" data-page="mensajes">💬 Comunidad</a>
      <a href="perfil.html" data-page="profile" class="is-active">👤 Perfil</a>
    </aside>

    <main class="page profile-page">
      <div class="container profile-shell profile-shell--wide">
        <section class="profile-main">
          <div class="card profile-hero" id="profileCard">
            <div class="profileHeader">
              <div class="heroIcon heroIcon--avatar" id="profileAvatarWrap">
                <img id="profileAvatarImg" alt="Foto de perfil" />
                <span id="profileAvatarFallback">USR</span>
              </div>
              <div class="profileHeaderInfo">
                <h1 class="glow-text" id="profileName" style="margin: 0; font-size: 36px">
                  Perfil
                </h1>
                <div class="muted" id="profileHandle" style="margin-top: 6px"></div>
                <div class="muted" id="profileStatus" style="margin-top: 6px">—</div>
                <div class="profileStats">
                  <div class="statCard">
                    <div class="statValue" id="statStreak">0</div>
                    <div class="statLabel">Racha</div>
                  </div>
                  <div class="statCard">
                    <div class="statValue" id="statExp">0</div>
                    <div class="statLabel">EXP</div>
                  </div>
                  <div class="statCard">
                    <div class="statValue" id="statLeague">—</div>
                    <div class="statLabel">Liga</div>
                  </div>
                  <div class="statCard">
                    <div class="statValue" id="statTop3">0</div>
                    <div class="statLabel">Top 3</div>
                  </div>
                </div>
              </div>
            </div>

            <div class="metaRow profileActions">
              <button class="btn-yellow" id="btnProfileAdd" type="button">Agregar</button>
              <a class="btn-white-outline" id="btnProfileChat" href="mensajes.html">Mensaje</a>
              <button class="btn-white-outline" id="btnProfileBlock" type="button">Bloquear</button>
              <a class="btn-white-outline" href="espanel.html">Volver</a>
              <span class="hintSmall" id="profileMsg"></span>
            </div>
          </div>

          <div class="profile-tabs" role="tablist" aria-label="Secciones del perfil">
            <button class="profile-tab-btn is-active" data-tab="info" type="button">Sobre mí</button>
            <button class="profile-tab-btn" data-tab="feed" type="button">Feed</button>
            <button class="profile-tab-btn" data-tab="rewards" type="button">Recompensas</button>
            <button class="profile-tab-btn" data-tab="courses" type="button">Cursos</button>
          </div>

          <section class="profile-tab is-active" id="tab-info">
            <div class="card">
              <div class="sectionTitle" style="margin-top: 0">Datos básicos</div>
              <div class="profile-basic">
                <div class="profile-avatar-edit">
                  <div class="heroIcon heroIcon--avatar heroIcon--lg" id="profileAvatarEdit">
                    <img id="profileAvatarEditImg" alt="Avatar" />
                    <span id="profileAvatarEditFallback">USR</span>
                  </div>
                  <input id="avatarInput" type="file" accept="image/*" hidden />
                  <button class="btn-white-outline" id="avatarUploadBtn" type="button">
                    Cambiar foto
                  </button>
                  <div class="hintSmall" id="avatarUploadHint"></div>
                </div>
                <div class="profile-basic-fields">
                  <div class="info-field">
                    <label for="basicName">Nombre visible</label>
                    <input id="basicName" class="input" type="text" placeholder="Tu nombre" />
                  </div>
                  <div class="info-field">
                    <label for="basicHandle">Usuario (login)</label>
                    <input
                      id="basicHandle"
                      class="input"
                      type="text"
                      placeholder="tu_login"
                    />
                    <div class="hintSmall">
                      Solo letras, números, guion y punto. Este usuario sirve para iniciar sesión.
                    </div>
                  </div>
                </div>
              </div>
              <div class="metaRow" style="margin-top: 12px">
                <button class="btn-yellow" id="basicSaveBtn" type="button">Guardar</button>
                <span class="hintSmall" id="basicSaveMsg"></span>
              </div>
            </div>

            <div class="card">
              <div class="sectionTitle" style="margin-top: 0">Info / Sobre mí</div>
              <div class="info-grid">
                <div class="info-field">
                  <label for="infoWhy">¿Por qué aprendo polaco?</label>
                  <textarea id="infoWhy" class="input" rows="3" placeholder="Comparte tu motivo..."></textarea>
                </div>
                <div class="info-field">
                  <label for="infoHard">¿Qué me cuesta más?</label>
                  <textarea id="infoHard" class="input" rows="3" placeholder="Lo que se te hace difícil..."></textarea>
                </div>
                <div class="info-field">
                  <label for="infoGoal">Mi meta</label>
                  <textarea id="infoGoal" class="input" rows="3" placeholder="Tu objetivo principal..."></textarea>
                </div>
              </div>
              <div class="metaRow" style="margin-top: 12px">
                <button class="btn-yellow" id="infoSaveBtn" type="button">Guardar</button>
                <span class="hintSmall" id="infoSaveMsg"></span>
              </div>
            </div>

            <div class="card">
              <div class="sectionTitle" style="margin-top: 0">Privacidad</div>
              <div class="privacy-grid">
                <div class="privacy-item">
                  <label for="privacyPosts">Visibilidad de publicaciones</label>
                  <select id="privacyPosts" class="select">
                    <option value="public">Públicas</option>
                    <option value="friends">Solo amigos</option>
                    <option value="private">Solo yo</option>
                  </select>
                </div>
                <div class="privacy-item">
                  <label for="privacyRewards">Recompensas visibles</label>
                  <select id="privacyRewards" class="select">
                    <option value="public">Sí</option>
                    <option value="private">Ocultas</option>
                  </select>
                </div>
                <div class="privacy-item">
                  <label for="privacyStatus">Estado visible</label>
                  <select id="privacyStatus" class="select">
                    <option value="public">Siempre</option>
                    <option value="private">Solo yo</option>
                  </select>
                </div>
                <div class="privacy-item">
                  <label for="privacyFriendReq">Solicitudes de amistad</label>
                  <select id="privacyFriendReq" class="select">
                    <option value="true">Permitir</option>
                    <option value="false">No permitir</option>
                  </select>
                </div>
                <div class="privacy-item">
                  <label for="privacyMessages">Mensajes directos</label>
                  <select id="privacyMessages" class="select">
                    <option value="true">Permitir</option>
                    <option value="false">No permitir</option>
                  </select>
                </div>
                <div class="privacy-item">
                  <label for="privacyPublic">Perfil público</label>
                  <select id="privacyPublic" class="select">
                    <option value="true">Visible</option>
                    <option value="false">Privado</option>
                  </select>
                </div>
              </div>
            </div>
          </section>

          <section class="profile-tab" id="tab-feed">
            <div class="card status-card" id="statusCard">
              <div class="status-heart" id="statusHeart">❤️</div>
              <div class="statusInputRow">
                <div class="nav-avatar nav-avatar--small statusAvatar" id="statusAvatar">
                  <img id="statusAvatarImg" alt="Foto de perfil" style="display: none" />
                  <span id="statusAvatarFallback">U</span>
                </div>
                <textarea
                  id="statusInput"
                  class="statusInput"
                  rows="3"
                  placeholder="¿Cómo te sientes aprendiendo hoy?&#10;Puedes escribir en español o polaco 💛"
                ></textarea>
              </div>
              <div class="statusTools">
                <button class="statusChip" data-tag="estado" id="statusMood">😊 Estado</button>
                <select id="statusMinutes" class="select statusSelect">
                  <option value="">☕ Aprendizaje</option>
                  <option value="5">5 min</option>
                  <option value="10">10 min</option>
                  <option value="15">15 min</option>
                  <option value="20">20 min</option>
                </select>
                <select id="statusCourse" class="select statusSelect">
                  <option value="">📘 Curso</option>
                  <option value="A1">A1</option>
                  <option value="A2">A2</option>
                  <option value="B1">B1</option>
                  <option value="B2">B2</option>
                </select>
                <button class="statusChip" data-tag="motivacion" id="statusMotivation">❤️ Motivación</button>
              </div>
              <div class="statusActions">
                <button class="btn-yellow" id="statusPostBtn" type="button" disabled>Publicar</button>
                <span class="hintSmall" id="statusHint"></span>
              </div>
            </div>

            <div class="feedList" id="feedList"></div>
          </section>

          <section class="profile-tab" id="tab-rewards">
            <div class="card">
              <div class="sectionTitle" style="margin-top: 0">Tus logros</div>
              <div class="achievement-grid" id="rewardsGrid">
                <div class="achievement-card" data-achievement="racha">
                  <div class="achievement-title">🔥 Rachas</div>
                  <div class="achievement-value" id="rewardStreak">0 días</div>
                  <div class="achievement-meta" id="rewardStreakMeta">Nivel 1</div>
                </div>
                <div class="achievement-card" data-achievement="insignias">
                  <div class="achievement-title">🏆 Insignias</div>
                  <div class="achievement-value" id="rewardBadges">0</div>
                  <div class="achievement-meta">Desbloqueadas</div>
                </div>
                <div class="achievement-card" data-achievement="dias">
                  <div class="achievement-title">☕ Días de aprendizaje</div>
                  <div class="achievement-value" id="rewardDays">0 días</div>
                  <div class="achievement-meta">Constancia</div>
                </div>
                <div class="achievement-card" data-achievement="constancia">
                  <div class="achievement-title">❤️ Constancia</div>
                  <div class="achievement-value" id="rewardConsistency">0%</div>
                  <div class="achievement-meta">Promedio semanal</div>
                </div>
              </div>
              <div class="muted" id="rewardDetail" style="margin-top: 10px">
                Haz clic en una tarjeta para ver el detalle.
              </div>
            </div>
          </section>

          <section class="profile-tab" id="tab-courses">
            <div class="card">
              <div class="sectionTitle" style="margin-top: 0">Tus cursos</div>
              <div class="coursesList" id="coursesList"></div>
            </div>
          </section>
        </section>

        <aside class="profile-side">
          <div class="card">
            <div class="sectionTitle" style="margin-top: 0">Comunidad</div>
            <div class="social-stat">
              <span>Amigos</span>
              <strong id="friendsCount">0</strong>
            </div>
            <div class="sectionTitle" style="margin-top: 16px">Últimas reacciones</div>
            <div class="muted" id="recentReactions">Sin reacciones aún.</div>
            <div class="sectionTitle" style="margin-top: 16px">Sugerencias</div>
            <div class="friendList" id="suggestionsList"></div>
            <div class="metaRow" style="margin-top: 12px">
              <a class="btn-yellow" id="inviteFriendsBtn" href="referidos.html">Invitar amigos</a>
            </div>
          </div>

          <div class="card">
            <div class="sectionTitle" style="margin-top: 0">Invitaciones</div>
            <div class="muted" id="invitesHint">No tienes invitaciones pendientes.</div>
            <div class="friendList" id="invitesList" style="margin-top: 10px"></div>
          </div>
        </aside>
      </div>
    </main>

    <script type="module" src="assets/js/pages/perfil-page.js"></script>
  </body>
</html>
